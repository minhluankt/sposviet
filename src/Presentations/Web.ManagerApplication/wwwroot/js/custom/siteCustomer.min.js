var dataTableOut,idcategory=0,idPrice=0,sortby="",urlGetCategoryPost="/API/Handling/GetAllCategoryPost",initParams={clearParams:function(){idPrice=0,sortby=""}};function CustomePopupAddCart(t,e){Swal.fire({title:t,html:e,showClass:{popup:"popup-cart"},footer:"<button class='btn btn-primary btn-continue mr-3'><i class='icon-cd icon-add_cart icon'></i>Tiếp tục mua hàng</button><button class='btn btn-gocart btn-success'><i class='icon-cd icon-doneAll icon'></i>Tiến hành đặt hàng</button>",allowOutsideClick:!0,showConfirmButton:!1,showCancelButton:!1,cancelButtonText:'<i class="fa fa-window-close"></i> Đóng',didRender:()=>{$(".btn-continue").click((function(){Swal.close()})),$(".btn-gocart").click((function(){Swal.close(),window.location.href="/Cart/Mycart"}))}})}var loadnEvent_init={loadeventmobi:function(){$(window).width()<769&&$(".careerCenterMenu").click((function(){$(this).find(".list-menu-profile").toggleClass("hide"),$(this).find(".list-menu-profile").toggleClass("show")}))},loadeventcardmobi:function(){$(window).width()<769?($("html").css("overflow","hidden"),$(".btn-back-mobi").click((function(){history.back()})),$(".remove-mobi").remove()):$(".remove-pc").remove()},loadeventnotifyuser:function(){$(".lstPaginatedListcontent .delete").click((function(){var t=$(this),e=$(this).data("id");$.ajax({url:"/Account/DeleteDataNotifmy",type:"POST",cache:!1,data:{id:e},success:function(e){e.isValid&&t.parent("li").remove()}})}))},loadeventcountnotifyuser:function(){$.ajax({url:"/Account/CountNotifmyUser",type:"GET",cache:!1,success:function(t){t.isValid&&$("b#count-notify").html(t.count)}})},loadAddCart:function(){var t=$(".add-to-cart"),e=$(".btnaddCart-detaiprod");$(t).click((function(){nameProAddCart=$(this).data("name"),imgProAddCart=$(this).data("img"),priceProAddCart=$(this).data("price"),addCart($(this).data("id"),1,!0)})),$(e).click((function(){nameProAddCart=$(this).data("name"),imgProAddCart=$(this).data("img"),priceProAddCart=$(this).data("price"),addCart($(this).data("id"),parseInt($("#qty").val()),!0)}))},loadicheckpriceinCateogry:function(){var t=window.location.href,e=new URL(t);let a=new URLSearchParams(e.search).get("sortby");$("input[order='"+a+"']").iCheck("check")},loadevenradiocheck:function(t){$("input#order").on("ifChecked",(async function(e){let a=$(this).parents(".index-block-product").find("#IdCode").val(),n=$(this).attr("order"),i=$(this).data("slug-cate");await loadatahtmlsell(this,a,t,n,i)}))},fetdataProductSellByCategory:async function(t){var e=await axios.get("/Search/GetProductSell?slug="+t);$("#dataProductSell").html(e.data),loadevent.load_sort_productmobi(),loadisCheck(),setTimeout((()=>{loadnEvent_init.loadevenradiocheck(1),loadnEvent_init.loadAddCart()}),500),$(document).on("click",".pagination  a",(async function(t){t.preventDefault();var e=$(this).attr("href").split("page=")[1];let a=$(this).attr("href").split("page=")[0];var n=e.split("&")[0],i=$(this).attr("href").split("txt=")[1].split("&")[0];await loadatahtmlsell(this,i,n,a.replaceAll("?",""))}))},fetdataProductSellByOneCategory:async function(t,e){loadnEvent_init.loadicheckpriceinCateogry(),setTimeout((function(){$("input#order").on("ifChecked",(function(t){e=$(this).attr("order"),SortAndSeartInCategoryProduct(1)})),$("input#price").on("ifChecked",(function(t){idPrice=$(this).val(),SortAndSeartInCategoryProduct(1)}))}),500),loadevent.load_tab_show_incategoryproduct(),initParams.clearParams(),$(window).scroll((function(){var a=$("#progressmarker").offset().top,n=$("#progressmarker").outerHeight(),i=$(window).height(),o=$(window).scrollTop();pages>=pageIndex&&!_incallback&&o>a+n-i-600&&loadnEvent_init.fetdataProductSellByOneCategoryLoadmore(pageIndex,t,e)}))},fetdataProductSellByOneCategoryLoadmore:async function(t,e,a){_incallback=!0;var n=await axios.get("/Search/GetProductByCategory?isPromotion=true&loadmore=true&idcate="+e+"&page="+t+"&sortby="+a);$("#ListProduct").append(n.data),_incallback=!1,pageIndex++,loadnEvent_init.loadAddCart()},fetListDataPost:async function(t,e,a){var n=await axios.get("/Search/GetListPost?page="+t+"&text="+a+"&idcategory="+e);n.data.isValid&&$("#dataPost").html(n.data.html)}};async function loadatahtmlsell(t,e,a,n="",i=""){var o=$(t).parents(".index-block-product"),l=await axios.get("/Search/GetProductByCategory?isPromotion=true&page="+a+"&txtcategory="+encodeURI(e)+"&sortby="+n+"&slugcate="+i);$(l.data).insertAfter(o),loadisCheck(),setTimeout((()=>{loadnEvent_init.loadevenradiocheck(a)}),"500"),o.remove(),loadevent.load_sort_productmobi(),loadnEvent_init.loadAddCart()}var commonfunc={cancelOrder:function(t,e=0){var a=$(t).parent("form#form_delete")[0];Swal.fire({title:"Bạn có chắc chắn muốn hủy không?",input:"textarea",inputPlaceholder:"Vui lòng nhập lý do bạn muốn hủy...",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Đồng ý",cancelButtonText:"Hủy bỏ",showLoaderOnConfirm:!0,inputValidator:t=>{if(!t)return"Vui lòng nhập lý do!"},preConfirm:t=>{try{var n=new FormData(a);n.append("content",t),$.ajax({type:"POST",url:a.action,data:n,contentType:!1,processData:!1,success:function(t){t.isValid&&(1==e?location.reload():t.loadTable?dataTableOut.ajax.reload(null,!1):t.loadTreeview?loadData():$("#viewAll").html(t.html))},error:function(t){console.log(t)}})}catch(t){console.log(t)}}})}},popupResult={success:function(t,e){Swal.fire({icon:"success",title:""!=e?e:"Thông báo",html:t,allowOutsideClick:!0,showConfirmButton:!1,showCancelButton:!0,cancelButtonText:'<i class="fa fa-window-close"></i> Đóng'})},error:function(t,e){Swal.fire({icon:"error",title:""!=e?e:"Thông báo",html:t,allowOutsideClick:!0,showConfirmButton:!1,showCancelButton:!0,cancelButtonText:'<i class="fa fa-window-close"></i> Đóng'})},info:function(t,e){Swal.fire({icon:"info",title:""!=e?e:"Thông báo",html:t,allowOutsideClick:!0,showConfirmButton:!1,showCancelButton:!0,cancelButtonText:'<i class="fa fa-window-close"></i> Đóng'})},warning:function(t,e){Swal.fire({icon:"warning",title:""!=e?e:"Thông báo",html:t,allowOutsideClick:!0,showConfirmButton:!1,showCancelButton:!0,cancelButtonText:'<i class="fa fa-window-close"></i> Đóng'})}};setTimeout((function(){$(".alert-success").hide(1e3),$(".alert-danger").hide(1e3)}),3e3),toastr.options={closeButton:!0,newestOnTop:!1,progressBar:!0,positionClass:"toast-top-right",preventDuplicates:!1,onclick:null,showDuration:"300",hideDuration:"1000",timeOut:"5000",extendedTimeOut:"1000",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"};var remove_item_cart=$(".remove-item-cart"),btn_minus=$(".mycart .btn-minus"),btn_plus=$(".mycart .btn-plus"),countCart=$(".count_item_pr"),btn_login=$("#btn_login"),selectProductType=$("#ProductType"),txtsearchindex=$("#txtsearchindex"),consultation=$("#CodeConsultation"),btnsearch=$("#btnsearch"),btnUpdateimgavata=$(".edit_imgavata"),addcomment=$(".addcomment button"),replycomment=$(".answerComment .btn-reply"),_myModalCustom=$("#myModalCustom"),_bodymodalCustom=$(".bodymodalCustom"),_listcategoryindetailpost=$(".detail-post .list-category"),loginby=$(".login-by"),myModalCustom=document.getElementById("myModalCustom"),span=document.getElementsByClassName("closemodalCustom")[0];function ChangeToSlug(t){return("@"+t.toLowerCase().replace(/á|à|ả|ạ|ã|ă|ắ|ằ|ẳ|ẵ|ặ|â|ấ|ầ|ẩ|ẫ|ậ/gi,"a").replace(/é|è|ẻ|ẽ|ẹ|ê|ế|ề|ể|ễ|ệ/gi,"e").replace(/i|í|ì|ỉ|ĩ|ị/gi,"i").replace(/ó|ò|ỏ|õ|ọ|ô|ố|ồ|ổ|ỗ|ộ|ơ|ớ|ờ|ở|ỡ|ợ/gi,"o").replace(/ú|ù|ủ|ũ|ụ|ư|ứ|ừ|ử|ữ|ự/gi,"u").replace(/ý|ỳ|ỷ|ỹ|ỵ/gi,"y").replace(/đ/gi,"d").replace(/\`|\~|\!|\@|\#|\||\$|\%|\^|\&|\*|\(|\)|\+|\=|\,|\.|\/|\?|\>|\<|\'|\"|\:|\;|_/gi,"").replace(/ /gi,"-").replace(/\-\-\-\-\-/gi,"-").replace(/\-\-\-\-/gi,"-").replace(/\-\-\-/gi,"-").replace(/\-\-/gi,"-")+"@").replace(/\@\-|\-\@|\@/gi,"")}async function addCommentproductAsync(t){value=!1;const e=await axios({method:"post",url:"/API/Handling/AddCommentProduct",headers:{"Content-Type":"multipart/form-data"},data:t});return value=e.data.isValid,value}span.onclick=function(){myModalCustom.style.display="none"},window.onclick=function(t){t.target==myModalCustom&&(myModalCustom.style.display="none")},Number.prototype.format=function(t,e,a,n){var i="\\d(?=(\\d{"+(e||3)+"})+"+(t>0?"\\D":"$")+")",o=this.toFixed(Math.max(0,~~t));return(n?o.replace(".",n):o).replace(new RegExp(i,"g"),"$&"+(a||","))},remove_item_cart.click((function(){var t=$(this);$.ajax({type:"POST",data:{IdItemCart:t.data("id")},dataType:"JSON",url:"/Cart/RemoveItemCart",beforeSend:function(){},success:function(e){if(e.isValid){countCart.html(e.data.quantity);let a=e.data.amount.format(0,3,".",",");$(".value-total").html(a+" vnđ"),$(".value-amount").html(a+" vnđ"),t.parents(".item-cart").remove()}else 1==e.login?popupResult.warning(e.mess):toastr.error(e.mess)}})})),btn_minus.click((function(){var t=$(this);t.attr("disabled","disabled"),t.parent().find("input").attr("disabled","disabled");var e=t.parent().find("#qty"),a=t.parents(".wrapper-title").find(".text-amount"),n=t.parent().find("#qty").data("price"),i=t.parent().find("#qty").data("id");let o=parseInt(e.val());if(!(!isNaN(o)&o>1))return!1;{let t=o-1;e.val(t);let l=(parseInt(n)*t).format(0,3,".",",");a.html(l),addCart(i,t,!1)}t.removeAttr("disabled"),t.parent().find("input").removeAttr("disabled")})),btn_plus.click((function(){var t=$(this);t.attr("disabled","disabled"),t.parent().find("input").attr("disabled","disabled");var e=t.parent().find("#qty"),a=t.parents(".wrapper-title").find(".text-amount"),n=t.parent().find("#qty").data("price"),i=t.parent().find("#qty").data("id");let o=parseInt(e.val());if(isNaN(o))return!1;{let t=o+1;e.val(t);let l=(parseInt(n)*t).format(0,3,".",",");a.html(l),addCart(i,t,!1)}t.removeAttr("disabled"),t.parent().find("input").removeAttr("disabled")})),replycomment.click((function(){var t=$(this);if(0==t.parent().find("textarea").length){let e=t.data("pro"),a=t.data("pattenid"),n=t.data("name");html='<div class="ele-content-reply mt-2">\n                <textarea class="form-control txtreply" rows="3" id="commentproduct" placeholder="Nhập nội dung của bạn!"></textarea>\n                <div class="mar-top clearfix">\n                   <button class="btn btn-sm btn-primary pull-right btn-replycomment" data-id-page-comment="'+e+'"  data-pattenid="'+a+'" type="button"><i class="fa fa-pencil fa-fw"></i> Gửi bình luận</button>\n                   <button class="btn btn-sm btn-danger pull-right btn-cancelreplycomment mr-3"  type="button"><i class="fa fa-ban fa-fw"></i> Hủy bỏ</button>\n                </div>\n             </div>',$(html).insertAfter(t),t.parent().find("textarea").focus(),t.parent().find("textarea").val("#"+n+"  "),loadevent.eventCancelComment(),loadevent.eventReplyComment()}})),addcomment.click((async function(){var t=$(this);idproduct=t.data("id-page-comment");var e=$(".addcomment textarea").val();if(0==e.trim())return toastr.error("Vui lòng nhập nội dung!"),!1;if((await axios.get("/Account/CheckLogin")).data.isValid){loadingStart();var a={IdProduct:idproduct,Comment:e};await addCommentproductAsync(a).then((function(t){t?popupResult.success("Bình luận thành công, hệ thống đang kiểm tra và sẽ phản hồi lại sau!"):popupResult.error("Bình luận thất bại, bạn vui lòng thử lại sau!"),loadingStop()}))}else Swal.fire({title:"Cập nhật thông tin!",html:'<form>\n                    <div class="form-group">\n                        <p class="pmd-lb">Tên: <span class="required"><sup>*</sup></span></p>\n                        <input type="text" class="form-control" name="txtNameRating" id="txtNameRating" aria-describedby="emailHelp" placeholder="Nhập họ và tên" value="">\n                        <p class="m-err required mt-1" style="display: none;">Tên phải có 2 ký tự trở lên</p>\n                    </div>\n                    <div class="form-group">\n                        <p class="pmd-ln2">Để nhận thông báo khi có trả lời. Hãy nhập email và số điện thoại (Không bắt buộc)</p>\n                        <p class="pmd-lb">Email:</p><input type="text" class="form-control" name="txtEmailRating" id="txtEmailRating" placeholder="Nhập email" value="">\n                        <p class="m-err required mt-1" style="display: none;">Nhập đúng định dạng email</p>\n                    </div>\n                    <div class="form-group">\n                        <p class="pmd-lb">Số điện thoại:</p>\n                        <input type="text" class="form-control" name="txtPhoneRating" id="txtPhoneRating" placeholder="Nhập số điện thoại" value="">\n                        <p class="m-err required mt-1" style="display: none;">Số điện thoại không hợp lệ</p>\n                    </div>\n                </form>',animation:"zoomIn",showCancelButton:!0,showClass:{popup:"popup-add-comment animate__animated animate__zoomIn"},confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Gửi nhận xét",cancelButtonText:"Hủy bỏ",showLoaderOnConfirm:!0,didRender:()=>{$("input#txtNameRating").on("input",(function(){this.value.length<2?$(this).parent().find(".m-err").show():$(this).parent().find(".m-err").hide()}));var t=/^\b[A-Z0-9._%-]+@[A-Z0-9.-]+\.[A-Z]{2,4}\b$/i;$("#txtEmailRating").on("input",(function(){var e=this.value;!t.test(e)&&e.length>0?$(this).parent().find(".m-err").show():$(this).parent().find(".m-err").hide()}))},preConfirm:async t=>{if(loadingStart(),txtNameRating=$("#txtNameRating").val(),txtEmailRating=$("#txtEmailRating").val(),txtPhoneRating=$("#txtPhoneRating").val(),0==txtNameRating.trim().length)return $("#txtNameRating").parent().find(".m-err").show(),!1;try{var a={IdProduct:idproduct,Comment:e,CusName:txtNameRating,CusEmail:txtEmailRating,CusPhone:txtPhoneRating};await addCommentproductAsync(a).then((function(t){t?popupResult.success("Bình luận thành công, hệ thống đang kiểm tra và sẽ phản hồi lại sau!"):popupResult.error("Bình luận thất bại, bạn vui lòng thử lại sau!"),loadingStop()}))}catch(t){console.log(t),loadingStop()}}})})),$(".show-seach-home input").focus((function(){$(".form-search").toggleClass("fixed_top"),$("html").css("overflow","hidden")})),$(".show-seach-home .input-group-append").click((function(){$(".form-search").toggleClass("fixed_top"),$("html").css("overflow","hidden")})),$(".title-seach img").click((function(){$(".form-search").toggleClass("fixed_top"),$("html").css("overflow","")})),$("#formSalesRegistration .btn-update").click((async function(){let t=$(this).data("type");$(this).data("secret");var e=$(this).data("id");if("email"==t){const{value:t}=await Swal.fire({title:"Cập nhật địa chỉ email",input:"email",showCancelButton:!0,confirmButtonText:"Cập nhật",cancelButtonText:"Hủy bỏ",inputLabel:"Email của bạn",inputPlaceholder:"Nhập email của bạn",inputValidator:t=>{if(!t)return"Vui lòng nhập đúng định dạng email"}});t&&$.ajax({type:"POST",url:"/Account/ComplementaryEmail",data:{email:t,Id:e,modal:!0},success:function(t){t.isValid?popupResult.success(t.html):popupResult.error(t.html)},error:function(t){popupResult.error(t)}})}else if("phone"==t){const{value:t}=await Swal.fire({title:"Cập nhật số điện thoại",input:"text",showCancelButton:!0,confirmButtonText:"Cập nhật",cancelButtonText:"Hủy bỏ",inputLabel:"Số điện thoại của bạn",inputPlaceholder:"Nhập số điện thoại của bạn",inputValidator:t=>{let e=t.replaceAll("_","");if(!t||e.length<14)return"Vui lòng nhập đúng số điện thoại"},customClass:{input:"txt-phonenumer"},didRender:()=>{$(".txt-phonenumer").inputmask("(999) 999-9999")}});t&&$.ajax({type:"POST",url:"/Account/UpdatePhone",data:{phone:t,id:e},success:function(e){e.isValid?($(".text-phone .value").html(t),$("#PhoneNumber").val(t),$(".text-phone .value").removeClass("no-value"),popupResult.success(e.html)):popupResult.error(e.html)},error:function(t){popupResult.error(t)}})}}));var loadevent={eventReplyComment:function(){$(".answerComment .btn-replycomment").click((async function(){var t=$(this);idproduct=t.data("id-page-comment"),idpattern=t.data("pattenid");var e=t.parents(".ele-content-reply").find("textarea#commentproduct").val();if(0==e.trim())return toastr.error("Vui lòng nhập nội dung!"),!1;if((await axios.get("/Account/CheckLogin")).data.isValid){var a={IdProduct:idproduct,IdPattern:idpattern,Comment:e};await addCommentproductAsync(a).then((function(t){t?popupResult.success("Bình luận thành công, hệ thống đang kiểm tra và sẽ phản hồi lại sau!"):popupResult.error("Bình luận thất bại, bạn vui lòng thử lại sau!")}))}else Swal.fire({title:"Cập nhật thông tin!",html:'<form>\n                                <div class="form-group">\n                                    <p class="pmd-lb">Tên: <span class="required"><sup>*</sup></span></p>\n                                    <input type="text" class="form-control" name="txtNameRating" id="txtNameRating" aria-describedby="emailHelp" placeholder="Nhập họ và tên" value="">\n                                    <p class="m-err required mt-1" style="display: none;">Tên phải có 2 ký tự trở lên</p>\n                                </div>\n                                <div class="form-group">\n                                    <p class="pmd-ln2">Để nhận thông báo khi có trả lời. Hãy nhập email và số điện thoại (Không bắt buộc)</p>\n                                    <p class="pmd-lb">Email:</p><input type="text" class="form-control" name="txtEmailRating" id="txtEmailRating" placeholder="Nhập email" value="">\n                                    <p class="m-err required mt-1" style="display: none;">Nhập đúng định dạng email</p>\n                                </div>\n                                <div class="form-group">\n                                    <p class="pmd-lb">Số điện thoại:</p>\n                                    <input type="text" class="form-control" name="txtPhoneRating" id="txtPhoneRating" placeholder="Nhập số điện thoại" value="">\n                                    <p class="m-err required mt-1" style="display: none;">Số điện thoại không hợp lệ</p>\n                                </div>\n                            </form>',animation:"zoomIn",showCancelButton:!0,showClass:{popup:"popup-add-comment animate__animated animate__zoomIn"},confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Gửi nhận xét",cancelButtonText:"Hủy bỏ",showLoaderOnConfirm:!0,didRender:()=>{$("input#txtNameRating").on("input",(function(){this.value.length<2?$(this).parent().find(".m-err").show():$(this).parent().find(".m-err").hide()}));var t=/^\b[A-Z0-9._%-]+@[A-Z0-9.-]+\.[A-Z]{2,4}\b$/i;$("#txtEmailRating").on("input",(function(){var e=this.value;!t.test(e)&&e.length>0?$(this).parent().find(".m-err").show():$(this).parent().find(".m-err").hide()}))},preConfirm:async t=>{if(txtNameRating=$("#txtNameRating").val(),txtEmailRating=$("#txtEmailRating").val(),txtPhoneRating=$("#txtPhoneRating").val(),0==txtNameRating.trim().length)return $("#txtNameRating").parent().find(".m-err").show(),!1;try{var a={IdPattern:idpattern,IdProduct:idproduct,Comment:e,CusName:txtNameRating,CusEmail:txtEmailRating,CusPhone:txtPhoneRating};await addCommentproductAsync(a).then((function(t){t?popupResult.success("Bình luận thành công, hệ thống đang kiểm tra và sẽ phản hồi lại sau!"):popupResult.error("Bình luận thất bại, bạn vui lòng thử lại sau!")}))}catch(t){console.log(t)}}})}))},eventCancelComment:function(){$(".answerComment .btn-cancelreplycomment").click((function(){$(this).parents("div.ele-content-reply").remove()}))},load_tab_show_incategoryproduct:function(t=0){$(".index-block-product .button_show_tab").click((function(){var t=$(this);t.toggleClass("active"),t.parent().find(".viewmore").toggleClass("show")})),loadevent.load_sort_productmobi(t)},load_sort_productmobi:function(t=0){$(".index-block-product .button_show_sortby").click((function(){var t=document.querySelector("html"),e=$(this);e.parents(".index-block-product").find(".row-order").hasClass("d-none")&&e.parents(".index-block-product").find(".row-order").toggleClass("d-none"),e.parents(".index-block-product").find(".row-order").hasClass("show")||e.parents(".index-block-product").find(".row-order").toggleClass("show"),$(window).width()<769&&e.parents(".index-block-product").find(".row-order").click((function(){var e=$(this);e.addClass("d-none"),e.removeClass("show"),e.parents("html").css("overflow",""),$("html").css("overflow",""),t.setAttribute("style","")}))})),$(".index-block-product .button_show_search").click((function(){let t=parseInt($(this).data("type"));if(1!=t&&(t=0),$(window).width()<769){$("input#price").iCheck("destroy"),$("html").css("overflow","hidden"),d=document.createElement("div"),$(d).addClass("show-popup-search").html("<div class='close-popup-search'><button class='btn btn-primary'>Đóng</button></div>").append($("#sort-price").html()).append("<div class='close-popup-success'><button class='btn btn-success btn-block'>Xem kết quả</button></div>").appendTo("body"),$(".close-popup-search").click((function(){$(".show-popup-search").remove(),$("html").css("overflow","")})),$("input#price").iCheck("uncheck");var e=window.location.href,a=new URL(e),n=new URLSearchParams(a.search).get("idPrice");idPrice=n,$(".show-popup-search input[type=radio]").each((function(){$(this).val()==n&&$(this).iCheck("check")})),loadisCheck(),$(".show-popup-search input#price").on("ifChecked",(function(t){})),$(".close-popup-success").click((function(){$("html").css("overflow",""),SortAndSeartInCategoryProduct(t),$(".close-popup-search").trigger("click")}))}}))},loadautocomplete:function(){jQuery.ui.autocomplete.prototype._resizeMenu=function(){this.menu.element.outerWidth(this.element.outerWidth())}},eventcollapsecategorypost:function(){$(".detail-post .list-category i").click((function(){$(this).parents("li").hasClass("active")?($(this).children("i").hasClass("fa-angle-down")?($(this).parent().parent().find(".dropdownlist").show("slow"),$(this).addClass("fa-angle-up"),$(this).removeClass("fa-angle-down")):($(this).parent().parent().find(".dropdownlist").hide("slow"),$(this).addClass("fa-angle-down"),$(this).removeClass("fa-angle-up")),$(this).parent().parent().removeClass("active")):($(this).closest(".list-category").find("li.active").find("span").children("i").removeClass("fa-angle-up").addClass("fa-angle-down"),$(this).closest(".list-category").find("li.active").find(".dropdownlist").hide("slow"),$(this).closest(".list-category").find("li.active").removeClass("active"),$(this).parent().parent("li").addClass("active"),$(this).parent().parent().find(".dropdownlist").show("slow"),$(this).addClass("fa-angle-up"),$(this).removeClass("fa-angle-down"))})),$(".detail-post .list-category .select").parents("ul").parent("li").addClass("select").addClass("active"),$(".detail-post .list-category .select").parents("ul").parent("li").find(".dropdownlist").show(),$(".detail-post .list-category .select").parents("ul").parent("li").parent("span").children("i").removeClass("fa-angle-dow").addClass("fa-angle-up")},eventScrollPostCategory:function(){widthr_r=$(".detail-post .right-ct").width(),height_h=document.getElementById("myheader").offsetHeight,window.matchMedia("(min-width: 992px)").matches&&$(window).bind("scroll",(function(){$(window).scrollTop()>160?($(".detail-post .left-ct .card").css("width",widthr_r+"px"),$(".detail-post .left-ct").addClass("fixed-bar"),$(".detail-post .right-ct").addClass("fixed-bar"),$(".detail-post .right-ct .card").css("width",widthr_r+"px"),$(".detail-post .body.fixed-bar").css("top",height_h+"px")):($(".detail-post .left-ct").removeClass("fixed-bar"),$(".detail-post .right-ct").removeClass("fixed-bar"),$(".detail-post .right-ct").css("width",""),$(".detail-post .left-ct .card").css("width",""))}))}};function loadWard(t,e=0){loaddataSelect2("/API/Handling/GetDataWartByIdDistrict?idDistrict="+t,"#IdWard",e,"Chọn phường/xã")}function loadEventRegisterCustomer(){loaddataSelect2("/API/Handling/GetDataDistrictByIdCity?idcity="+$("#IdCity").val(),"#IdDistrict",0,"Chọn quận/chuyện"),$("#IdCity").select2({placeholder:"Chọn tỉnh thành",allowClear:!0,language:{noResults:function(){return"Không tìm thấy dữ liệu"}}}).on("change",(function(t){$("#IdDistrict").empty().append('<option selected="selected" value=""></option>'),$("#IdWard").empty().append('<option selected="selected" value=""></option>'),loaddataSelect2("/API/Handling/GetDataDistrictByIdCity?idcity="+this.value,"#IdDistrict",0,"Chọn quận/chuyện",!1),$("#IdDistrict").trigger("change")})),$("#IdDistrict").change((function(){$("#IdWard").empty().append('<option selected="selected" value=""></option>'),loadWard($(this).val())}))}function loadEventButonlogin(){$(".btn_login").click((function(){LoginFom()})),$(".btn-registration").click((function(){registrationFom()}))}function loginPostAjax(){$.ajax({type:"POST",url:"/Account/Login",data:$("#loginformLoginPopup").serialize(),success:function(t){t.isValid?($("#loginformLoginPopup").modal("hide"),window.location.reload()):Ladda.stopAll()},error:function(t){console.log(t)}})}function registrationAjax(t){$.ajax({type:"POST",url:"/Account/Register",data:$("#Registerform").serialize(),success:function(t){if(t.isValid){$("#RegisterModal").modal("hide");let t="Chúc mừng bạn đã đăng ký tài khoản thành công. Vui lòng vào Email để xác nhận và tiếp tục sử dụng dịch vụ";jQueryModal.MessCustom("Đăng ký thành công",t,"Đóng",(function(){jQueryModal.MessCustomCloes}))}else Ladda.stopAll()},error:function(t){console.log(t)}})}var minlength6="Hãy nhập ít nhất 6 ký tự";function registrationFom(){$.ajax({type:"GET",url:"/Account/Register?popup=true",success:function(t){t.isValid&&($("#RegisterModal").remove(),$("body").append(t.html),$("#RegisterModal").modal("show"),$("#RegisterModal").on("hidden.bs.modal",(function(t){$("#RegisterModal").remove()})),eventValidateFormRegister(),$("input#Email").change((function(){$(this).value;$.ajax({type:"POST",url:"/Account/ValidateEmail",data:{Email:$("input#Email").val()},success:function(t){t.isValid&&($("#UserName").val(t.name),$("#UserName").focus()),$("#Email").focus()},error:function(t){console.log(t)}})})),$("input.inputmask").inputmask(),$("#PhoneNumber").inputmask("(999) 999-9999"),loaddaterangepicker(),$("#Registerform button").click((function(){$("#Registerform").valid()&&registrationAjax(this)})))},error:function(t){console.log(t)}})}function eventValidateFormRegister(t="Registerform"){_form=$("#"+t),_form.validate({rules:{UserName:{required:!0,minlength:6},Name:{required:!0,minlength:6},Email:{required:!0,email:!0},Address:{required:!0,minlength:6},PhoneNumber:{required:!0,minlength:14},Password:{required:!0,minlength:6},ConfirmPassword:{required:!0,equalTo:"#Password",minlength:6}},messages:{UserName:{required:"Vui lòng nhập tên đăng nhập",minlength:minlength6},Name:{required:"Vui lòng nhập họ và tên",minlength:minlength6},Address:{required:"Vui lòng nhập địa chỉ",minlength:minlength6},Email:{required:"Vui lòng nhập địa chỉ email",email:"Email nhập lại không khớp"},PhoneNumber:{required:"Vui lòng nhập số điện thoại",minlength:"Vui lòng nhập đúng định dạng"},Password:{required:"Vui lòng nhập mật khẩu",minlength:minlength6},ConfirmPassword:{equalTo:"Mật khẩu nhập lại không khớp",required:"Vui lòng nhập lại mật khẩu",minlength:minlength6}},errorElement:"span",errorPlacement:function(t,e){Ladda.stopAll(),t.addClass("invalid-feedback");var a=e.parents(".form-group").children();t.insertAfter(a.last()),Ladda.stopAll()},highlight:function(t){$(t).addClass("is-invalid").removeClass("is-valid"),Ladda.stopAll()},unhighlight:function(t){$(t).addClass("is-valid").removeClass("is-invalid")},submitHandler:function(t){t.submit()}})}function validatefomrlogin(t=""){_loginfomr=$("#loginform"),""!=t&&(_loginfomr=$("#"+t)),_loginfomr.validate({rules:{UserName:{required:!0,minlength:6},Password:{required:!0,minlength:6}},messages:{UserName:{required:"Vui lòng nhập tên đăng nhập",minlength:minlength6},Password:{required:"Vui lòng nhập mật khẩu",minlength:minlength6}},errorElement:"span",errorPlacement:function(t,e){Ladda.stopAll(),t.addClass("invalid-feedback");var a=e.parents(".form-group").children();t.insertAfter(a.last()),Ladda.stopAll()},highlight:function(t){$(t).addClass("is-invalid").removeClass("is-valid"),Ladda.stopAll()},unhighlight:function(t){$(t).addClass("is-valid").removeClass("is-invalid")},submitHandler:function(t){t.submit()}})}var errrequired="Dữ liệu không được để trống",errminlength5="Trường dữ liệu ít nhất 5 ký tự";function LoginFom(){$.ajax({type:"GET",url:"/Account/Login?popup=true",success:function(t){t.isValid&&($("#loginModal").remove(),$("body").append(t.html),$("#loginModal").modal("show"),validatefomrlogin("loginformLoginPopup"),$("#loginModal").on("hidden.bs.modal",(function(t){$("#loginModal").remove()})),$("#loginformLoginPopup button").click((function(){$("#loginformLoginPopup").valid()&&loginPostAjax()})))},error:function(t){console.log(t)}})}var jQueryModal={MessCustom:function(t,e,a="Đóng",n=""){var i=$('<div class="popup" data-pd-popup="popupNew">\n                        <div class="popup-inner">\n                            <img src="../../icon/icon_luantm/success.svg"/>\n                            <h1>'+t+"</h1>\n                          <p>"+e+'</p>\n                            <p><a data-pd-popup-close="popupNew" id="okButton" href="#" class="btn btn-danger">'+a+'</a></p>\n                            <a class="popup-close" data-pd-popup-close="popupNew" href="#"> </a>\n                        </div>\n                    </div>\n                  </div>');$("body").append(i),$('[data-pd-popup="popupNew"]').fadeIn(200),$("body").addClass("popup-open"),i.find("#okButton").click((function(t){n(),$("body").removeClass("popup-open"),$(this).unbind(),$('[data-pd-popup="popupNew"]').fadeOut(200),$(".popup").remove(),$(this).remove(),i.remove()}))},MessCustomCloes:function(){$('[data-pd-popup="popupNew"]').fadeOut(200),$(".popup").remove()},Show:function(t,e,a="modal-lg"){var n=$('<div id="myModalShowMess" class="modal fade"><div class="modal-dialog modal-custom '+a+'"><div class="modal-content"><div class="modal-header"><h5 class="modal-title w-100">'+t+'</h5><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><div class="modal-body">'+e+'</div><div class="modal-footer"><button class="btn btn-primary" data-dismiss="modal">Đóng</button></div></div></div></div>');n.modal("show"),n.on("hide.bs.modal",(function(){$(this).unbind(),$(this).remove()}))},ShowNotFooter:function(t,e,a="modal-lg"){var n=$('<div id="myModalShowMess" class="modal fade"><div class="modal-dialog modal-custom '+a+'"><div class="modal-content"><div class="modal-header"><h5 class="modal-title w-100">'+t+'</h5><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><div class="modal-body">'+e+"</div></div></div></div>");n.modal("show"),n.on("hide.bs.modal",(function(){$(this).unbind(),$(this).remove()}))}};function loadeventCheckallCart(){var t=!1,e=!1,a=!1;$("#check-all").on("ifChecked",(function(a){e=!0,$(".item-check").each((function(){$(this).iCheck("check")})),t||updateSelectArray(),t=!1,e=!1})),$("#check-all").on("ifUnchecked",(function(e){a=!0,t||($(".item-check").each((function(){$(this).iCheck("uncheck")})),updateSelectArray()),a=!1,t=!1})),$(".item-check").on("ifUnchecked",(function(e){let n=$(this).data("id");$(this).data("idcart");if(!a){let t=[];t.push(parseInt(n)),updateSelectItemCart(t,!1)}t=!0,$("#check-all").iCheck("uncheck")})),$(".item-check").on("ifChecked",(function(a){let n=$(this).data("id"),i=[];i.push(parseInt(n));$(this).data("idcart");e||updateSelectItemCart(i,!0),t=!0,$(".item-check").filter(":checked").length==$(".item-check").length&&($("#check-all").iCheck("check"),t=!1)}))}function updateSelectArray(){var t=$(".item-check:checked").map((function(){return parseInt($(this).val())})).toArray();t.length>0?updateSelectItemCart(t,!0,!1,!0):updateSelectItemCart(t,!1,!0)}function updateSelectItemCart(t,e,a=!1,n=!1){$.ajax({type:"POST",data:{IdItemCart:t,Select:e,removeAll:a,checkAll:n},dataType:"JSON",url:"/Cart/UpdateItemCart",beforeSend:function(){},success:function(t){if(t.isValid){countCart.html(t.data.quantity);let e=t.data.amount.format(0,3,".",",");$(".value-total").html(e+" vnđ"),$(".value-amount").html(e+" vnđ")}else 1==t.login?popupResult.warning(t.mess):toastr.error(t.mess)}})}function confirms(t,e,a,n,i){var o=$('<div class="modal fade" id="myModalShowMess"><div class="modal-dialog modal-dialog-centered"><div class="modal-content"><div class="modal-header"><h6 class="modal-title">'+t+'</h6><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span ></button ></div><div class="modal-body"><p>'+e+'</p></div><div class="modal-footer"><button type="button" class="btn btn-secondary" data-dismiss="modal">'+a+'</button><button type="button" id="okButton" class="btn btn-danger">'+n+"</button></div></div></div></div>");o.find("#okButton").click((function(t){i(),o.modal("hide"),$(this).unbind(),$(this).remove()})),o.on("hide.bs.modal",(function(){$("div#myModal").empty(),$(this).unbind(),$(this).remove()})),o.modal("show")}function LoadDataTable(){$("#TableData").DataTable({lengthMenu:[[10,25,50,100,200,-1],[10,25,50,100,200,"All"]],pageLength:10,order:[[0,"desc"]],pagingType:"full_numbers",language:{oPaginate:{sFirst:"Đầu",sPrevious:"Trước",sNext:"Tiếp",sLast:"Cuối"},sSearch:"Tìm kiếm:",sInfoFiltered:"(được lọc từ _MAX_ mục)",lengthMenu:"Hiển thị _MENU_ dòng trên một trang",zeroRecords:"Không tìm thấy kết quả nào",sInfo:"Hiển thị dòng _START_  đến dòng _END_  trên tổng số _TOTAL_ dòng (Trang _PAGE_/_PAGES_)",infoEmpty:"Không có dữ liệu",infoFiltered:"(Lọc được từ _MAX_ tổng số mục )"}})}function loadLadda(){Ladda.bind(".ladda-button",{callback:function(t){$("input#email_send,input#password,input#confirm_password,input#email_to,input#email_cc,input#email_bcc,input#email_name").attr("readonly","readonly")},timeout:2e5})}function validatechangepass(){$("#formChangePass").bind("invalid-form.validate",(function(){})).validate({rules:{Email:{required:!0,email:!0},Password:{required:!0,pwcheck:!0},PasswordOld:{required:!0,minlength:6},ConfirmPassword:{required:!0,minlength:6,equalTo:"#Password"}},messages:{Email:{required:errrequired,email:"Email không đúng định dạng"},Password:{required:errrequired,pwcheck:"Mật khẩu ít nhất 8 ký tự, có chứa chữ hoa, chữ thường và ký tự đặt biệt"},PasswordOld:{required:errrequired,minlength:minlength6},ConfirmPassword:{required:errrequired,minlength:minlength6,equalTo:"Mật khẩu nhập lại không đúng"}},errorElement:"span",errorPlacement:function(t,e){if($(".field-validation-error").hide(),Ladda.stopAll(),t.addClass("invalid-feedback"),"checkbox"===e.prop("type"))t.insertAfter(e.parent("label")),Ladda.stopAll();else{var a=e.parent();a=a.children().last(),t.insertAfter(a.last()),Ladda.stopAll()}},highlight:function(t){$(t).addClass("error"),Ladda.stopAll()},unhighlight:function(t){$(t).removeClass("error"),Ladda.stopAll()},submitHandler:function(t){t.submit()}})}function confirmcustom(t,e){return confirms("Xác nhận",e,"<i class='far fa-times-circle'></i> Hủy","<i class='fas fa-check-circle'></i> Đồng ý",(function(){$(t).closest("form").submit(),$(t).form.submit()})),!1}$(document).ajaxStart((function(){$.blockUI({message:$('<div class="loader mx-auto">\n <div class="line-scale-pulse-out">\n   <div class="bg-success"></div>\n <div class="bg-success"></div>\n  <div class="bg-success"></div>\n <div class="bg-success"></div>\n                                <div class="bg-success"></div>\n                            </div>\n  <span>Đang xử lý.....</span>                      </div>')})})).ajaxStop((function(){Ladda.stopAll(),$.unblockUI()})),$("#TableData").DataTable({lengthMenu:[[10,25,50,100,200,-1],[10,25,50,100,200,"All"]],pageLength:10,order:[[0,"desc"]],pagingType:"full_numbers",language:{oPaginate:{sFirst:"Đầu",sPrevious:"Trước",sNext:"Tiếp",sLast:"Cuối"},sSearch:"Tìm kiếm:",sInfoFiltered:"(được lọc từ _MAX_ mục)",lengthMenu:"Hiển thị _MENU_ dòng trên một trang",zeroRecords:"Không tìm thấy kết quả nào",sInfo:"Hiển thị dòng _START_  đến dòng _END_  trên tổng số _TOTAL_ dòng (Trang _PAGE_/_PAGES_)",infoEmpty:"Không có dữ liệu",infoFiltered:"(Lọc được từ _MAX_ tổng số mục )"}}),$((function(){var t=window.location;$("#menu_portal a").filter((function(){return this.href==t})).addClass("active").parents("li.nav-item").addClass("active"),$(".menu-info-user a").filter((function(){return this.href==t})).addClass("active").parent("li").addClass("active")})),Ladda.bind(".ladda-button",{callback:function(t){$("input#email_send,input#password,input#confirm_password,input#email_to,input#email_cc,input#email_bcc,input#email_name").attr("readonly","readonly")},timeout:2e5}),$.validator.addMethod("pwcheck",(function(t,e){return!!/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[@#$%&])(.{8,20}$)/.test(t)}),(function(t,e){let a=$(e).val();return/^(.{8,20}$)/.test(a)?/^(?=.*[A-Z])/.test(a)?/^(?=.*[a-z])/.test(a)?/^(?=.*[0-9])/.test(a)?!/^(?=.*[@#$%&])/.test(a)&&"Mật khẩu phải chứa một trong các ký tự đặc biệt từ @#$%&.":"Mật khẩu phải chứa ít nhất một chữ số":"Mật khẩu phải chứa ít nhất một chữ thường":"Mật khẩu phải chứa ít nhất một chữ hoa.":"Mật khẩu phải dài từ 8 đến 20 ký tự"})),$(document).ready((function(){$('[data-toggle="tooltip"]').tooltip(),$(".form-image").click((function(){$("#customFile").trigger("click")})),setTimeout((function(){$("body").addClass("loaded")}),200),jQueryModalGet=(t,e,a=!0,n="modal-lg")=>{try{return $.ajax({type:"GET",url:t,contentType:!1,processData:!1,success:function(t){a?t.isValid&&(t.modelFooter?jQueryModal.Show(e,t.html,n):jQueryModal.ShowNotFooter(e,t.html,n),t.loadDataTable&&LoadDataTable()):t.isValid?($("#form-modal .modal-body").html(t.html),$("#form-modal .modal-title").html(e),$("#form-modal .modal-dialog").addClass(n),t.modelFooter&&$("#form-modal .modal-footer").removeClass("d-none"),$("#form-modal").modal("show")):($("#form-modal .modal-body").html(t),$("#form-modal .modal-dialog").addClass(n),$("#form-modal .modal-title").html(e),$("#form-modal").modal("show"))},error:function(t){console.log(t)}}),!1}catch(t){console.log(t)}},jQueryPost=t=>{try{return $.ajax({type:"POST",url:t,contentType:!1,processData:!1,success:function(t){},error:function(t){console.log(t)}}),!1}catch(t){console.log(t)}},jQueryModalPost=t=>{try{return $(t).valid()?($.ajax({type:"POST",url:t.action,data:new FormData(t),contentType:!1,processData:!1,success:function(t){t.isValid?(t.loadTable?dataTableOut.ajax.reload(null,!1):($("#viewAll").html(t.html),t.loadDataTable&&LoadDataTable()),$("#form-modal").modal("hide"),$("#myModalShowMess").modal("hide"),$("#myModalShowMess").unbind(),$("#myModalShowMess").remove()):Ladda.stopAll()},error:function(t){console.log(t)}}),!1):(Ladda.stopAll(),!1)}catch(t){console.log(t)}},jQueryModalDelete=t=>(confirms("Xác nhận","Bạn có chắc chắn muốn tiếp tục không?","<i class='far fa-times-circle'></i> Hủy","<i class='fas fa-check-circle'></i> Đồng ý",(function(){try{$.ajax({type:"POST",url:t.action,data:new FormData(t),contentType:!1,processData:!1,success:function(t){t.isValid&&(t.loadTable?dataTableOut.ajax.reload(null,!1):t.loadTreeview?loadData():$("#viewAll").html(t.html))},error:function(t){console.log(t)}})}catch(t){console.log(t)}})),!1)})),$().ready((function(){})),$((function(){var t=window.location;$(".app-sidebar__inner a").filter((function(){return this.href==t})).addClass("mm-active").parents().parents("ul").addClass("mm-show").addClass("mm-activee")})),$("#form-modal").on("hidden.bs.modal",(function(t){$("div.modal-body").html(""),$("div.modal-body").empty(),$(".select2").select2({placeholder:"Chọn giá trị",allowClear:!0,language:{noResults:function(){return"Không tìm thấy dữ liệu"}}})})),$("input.inputmask").inputmask();var errRegex="Vui lòng nhập đúng định dạng",emailformat=$("#emailformat").text();$("#formSalesRegistrationss").validate({rules:{Name:{required:!0},CusTaxCode:{required:!0},Address:{required:!0},Email:{required:!0,regex:/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/g}},messages:{Name:{required:errrequired},CusTaxCode:{required:errrequired},Address:{required:errrequired},Email:{regex:errRegex}},errorElement:"em",errorPlacement:function(t,e){if(Ladda.stopAll(),t.addClass("invalid-feedback"),"checkbox"===e.prop("type"))t.insertAfter(e.parent("label")),Ladda.stopAll();else{var a=e.parent();a=a.children().last(),t.insertAfter(a.last()),Ladda.stopAll()}},highlight:function(t){$(t).addClass("is-invalid").removeClass("is-valid"),Ladda.stopAll()},unhighlight:function(t){$(t).addClass("is-valid").removeClass("is-invalid")},submitHandler:function(t){t.submit()}}),$(".select2-2").select2({placeholder:"Chọn giá trị",allowClear:!0,language:{noResults:function(){return"Không tìm thấy dữ liệu"}}});var form=$("#create-formCompany");function save(){$("#create-formCompany").valid()}function pushState(t){window.history.pushState({turbolinks:!0,url:t},null,t)}var JqueryModal={ViewPDF:function(t){loadingStart();jQueryModal.Show("Thông tin chi tiết",'<div id="ViewPDF"></div>',"modal-70"),setTimeout((function(){PDFObject.embed(t,"#ViewPDF"),loadingStop()}),1e3)},Delete:function(t,e){return confirms("Xác nhận","Bạn có chắc chắn muốn xóa không?","<i class='far fa-times-circle'></i> Hủy","<i class='fas fa-check-circle'></i> Đồng ý",(function(){try{$.ajax({type:"POST",url:t,data:{Id:parseInt(e)},contentType:"application/json",success:function(t){t.isValid&&$("#viewAll").html(t.html)},error:function(t){console.log(t)}})}catch(t){console.log(t)}})),!1},DeleteRemove:function(t,e,a){return confirms("Xác nhận","Bạn có chắc chắn muốn xóa không?","<i class='far fa-times-circle'></i> Hủy","<i class='fas fa-check-circle'></i> Đồng ý",(function(){try{return $.ajax({type:"POST",url:t,async:!1,data:{Id:parseInt(e)},success:function(t){if(t.isValid)return""!=t.html&&$("#viewAll").html(t.html),$(a).parents("tr").remove(),!0},error:function(t){console.log(t)}}),!1}catch(t){console.log(t)}})),!1}};function loadingElementStart(t){$("#"+t).block({message:$('<div class="loader mx-auto">\n<div class="ball-pulse-sync">\n<div class="bg-white"></div>\n<div class="bg-white"></div>\n<div class="bg-white"></div>\n</div>\n</div>')})}function loadingStopElement(t){$("#"+t).unblock()}function loadingStart(){$.blockUI({message:'<div class="loader"></div>',css:{}})}function loadingStop(){$.unblockUI()}async function loadDataAjaxHtml(t,e="#viewAll",a=!0){$.ajax({global:!1,async:a,type:"GET",url:t,beforeSend:function(){$(e).block({message:$('<div class="loader mx-auto">\n<div class="ball-pulse-sync">\n<div class="bg-white"></div>\n<div class="bg-white"></div>\n<div class="bg-white"></div>\n</div>\n</div>')})},success:function(t){void 0!==t.isValid&&t.isValid?($(e).html(t.html),LoadDataTable()):$(e).html(t),$.unblockUI(),Ladda.stopAll()}})}function __highlight(t,e){var a=new RegExp("("+$.ui.autocomplete.escapeRegex(e)+")","ig");return t.replace(a,"<strong>$1</strong>")}function LoadDataTableById(t){dataTable=$("#"+t).DataTable({lengthMenu:[[10,25,50,100,200,-1],[10,25,50,100,200,"All"]],pageLength:10,pagingType:"full_numbers",language:{oPaginate:{sFirst:"Đầu",sPrevious:"Trước",sNext:"Tiếp",sLast:"Cuối"},sSearch:"Tìm kiếm:",sInfoFiltered:"(được lọc từ _MAX_ mục)",lengthMenu:"Hiển thị _MENU_ dòng trên một trang",zeroRecords:"Không tìm thấy kết quả nào",sInfo:"Hiển thị dòng _START_  đến dòng _END_  trên tổng số _TOTAL_ dòng (Trang _PAGE_/_PAGES_)",infoEmpty:"Không có dữ liệu",infoFiltered:"(Lọc được từ _MAX_ tổng số mục )"}})}function loadeventchillmenu(){$(".modal-menu .header i").click((function(){$(this).closest(".modal-menu").find("*").off(),$(this).closest(".modal-menu").remove(),$("html, body").css("overflow","")})),$(".modal-menu-category .menu-pattern i").click((function(){$(this).closest("li.item-menu").toggleClass("active"),$(this).hasClass("fa-plus")?($(this).removeClass("fa-plus"),$(this).addClass("fa-minus")):($(this).removeClass("fa-minus"),$(this).addClass("fa-plus"))}))}function loadDataAjax(t){var e="";return $.ajax({global:!1,async:!1,dataType:"JSON",type:"GET",url:t,success:function(t){e=t}}),e}function LoadEventMenuMobi(){$(".menu-infouser").on("click",(async function(){var t=await loadDataAjax("/Account/GetUser"),e=t.data,a="";a=""!=e?'<div class="modal-menu-infouser modal-menu">\n                            <div class="header">\n                                <i class="fas fa-long-arrow-alt-left"></i>\n                                <h4>Thông tin cá nhân</h4>\n                            </div>\n                            <div class="body">\n                               <div class="col1">\n                                   <img src="../images/user.png" />\n                                   <div class="right-inf">\n                                     <ul>\n                                         <li>\n                                              <span class="first">Họ và tên</span>\n                                              <p class="last">: '+e.name+'</p>\n                                         </li>\n                                         <li>\n                                              <span class="first">Tài khoản</span>\n                                              <p class="last">: '+e.userName+'</p>\n                                         </li>\n                                         <li>\n                                              <span class="first">Email</span>\n                                              <p class="last">: '+(null!=e.email?e.email:"")+'</p>\n                                         </li>\n                                         \n                                     </ul>\n                                   </div>\n                               </div>\n                               <div class="item-category">\n                                   <ul class="col-menu">\n                                       <li><a href="/quan-ly-tin-dang"><span class="icon-manager icon-cd"></span> Quản lý tin đăng</a> </li>\n                                       <li><a href="/dang-tin"><span class="icon-create icon-cd"></span> Đăng tin</a></li>\n                                   </ul>\n                                     <ul class="col-menu">\n                                       <li><a href="/Account/Profile"><span class="icon-user icon-cd"></span> Thông tin cá nhân</a></li>\n                                       <li><a href="/Account/ChangePass"><span class="icon-lock_open icon-cd"></span> Đổi mật khẩu</a></li>\n                                       <li> <a href="/Account/Logout"><span class="icon-logout icon-cd"></span> Đăng xuất</a> </li>\n                                   </ul>\n                               </div>\n                            </div>\n                        </div>':'<div class="modal-menu-infouser modal-menu">\n                            <div class="header">\n                                <i class="fas fa-long-arrow-alt-left"></i>\n                                <h4>Thông tin cá nhân</h4>\n                            </div>\n                            <div class="body">\n                               <div class="login">\n                                      <a href="javascript:void(0)" class="btn_reg btn-registration">Đăng ký</a>\n                                      <a href="javascript:void(0)" class="btn_login">Đăng nhập</a>\n                                </div>\n                            </div>\n                        </div>',$("html, body").css("overflow","hidden"),$("body").append(a),t.isLogin||loadEventButonlogin(),await loadeventchillmenu(),a=""})),$(".menu-alert").on("click",(async function(){let t="";var e=await loadDataAjax("/Sell/GetAllAlert"),a=JSON.parse(e.data);e.isLogin?e.data.length>0?(t='<ul class="list-alert">',$.each(a,(function(e,a){t+='<li class="item-alert">\n                                      <a href="/" class="no-review"> (24/24/1211) Thông báo tin đăng đã được phê duyệt</a>\n                                      <small>Tin đăng "Bất động sản quảng nam" đã được phê duyệt</small>\n                                    </li>'})),t+="</ul>"):t='<p class="no-alert">Chưa có thông báo nào</p>':t='<div class="login">\n                      <a href="javascript:void(0)" class="btn_reg btn-registration">Đăng ký</a>\n                      <a href="javascript:void(0)" class="btn_login">Đăng nhập</a>\n                </div>';let n='<div class="modal-menu-alert modal-menu">\n                        <div class="header">\n                            <i class="fas fa-long-arrow-alt-left"></i>\n                            <h4>Thông báo ('+a.length+')</h4>\n                        </div>\n                        <div class="body">\n                            '+t+"\n                        </div>\n                  </div>";$("html, body").css("overflow","hidden"),$("body").append(n),e.isLogin||loadEventButonlogin(),await loadeventchillmenu()})),$(".menu-category").on("click",(async function(){$(".modal-menu-category").remove();let t="";var e=await loadDataAjax("/API/Handling/GetAllCategoryProduct"),a="",n=!1;$.each(e,(function(i,o){if(""!=o.text)if(o.isParent){""!=t&&(1==n&&(t+='<ul class="dropdown-menu-item">'+a+"</ul>"),t+="</li>");let i='<i class="fas fa-minus"></i>',l=e.find((t=>t.idPattern==o.id));null!=l&&""!=l&&(i='<i class="fas fa-plus"></i>'),t+='<li class="item-menu">\n                                    <div class="menu-pattern">\n                                        '+i+'\n                                         <a href="/'+o.slug+'">\n                                           '+o.text+"\n                                        </a>\n                                    </div>\n                                   ",n=!1,a=""}else a+=' <li>\n                                           <i class="fas fa-minus"></i>\n                                            <a href="/'+o.slug+'">\n                                            '+o.text+"\n                                            </a>\n                                        </li>",n=!0})),1==n&&(t+='<ul class="dropdown-menu-item">'+a+"</ul>"),t+="</li>";let i='<div class="modal-menu-category modal-menu">\n                    <div class="header">\n                        <i class="icon-arrow_back_white icon-cd"></i>\n                        <h4>Danh mục</h4>\n                    </div>\n                    <div class="body">\n                        <ul class="list-category">';i+=t,i+="</ul></div></div>",$("html, body").css("overflow","hidden"),$("body").append(i),await loadeventchillmenu()}))}function checkloadcontentProduct(){$(".body-Description").height()>700&&($(".body-Description").addClass("hide-content"),$(".body-Description").parent().append("<span class='show-more'>Xem thêm</span>")),$(".show-more").click((function(){$(this).remove(),$(".body-Description").removeClass("hide-content")}))}async function loadProductInCategory(t){var e=await loadDataAjax("/API/Handling/GetAllProductInCategory?idCategory="+t);if(e.isValid){htmlcategory="";let t=JSON.parse(e.data);$.each(t,(function(t,e){let a="",n='<span class="current_price">'+e.Price+"₫</span>";e.isRunPromotion?(e.DiscountRun>0&&(a='<div class="label_product">\n                                  <span class="label_sale"> '+e.DiscountRun+"% </span>\n                                </div>"),n=' <span class="current_price">'+e.PriceDiscountRun+'₫</span>\n                                                <span class="old_price">'+e.Price+"₫</span>"):e.isPromotion&&(e.Discount>0&&(a='<div class="label_product">\n                                  <span class="label_sale"> '+e.Discount+"% </span>\n                                </div>"),n=' <span class="current_price">'+e.PriceDiscount+'₫</span>\n                                                <span class="old_price">'+e.Price+"₫</span>"),htmlcategory+='<div class="col-product col-item">\n                                <div class="body">\n                                    <div class="product_thumb">\n                                        <a href="'+e.Slug+'">\n                                            <img src="../'+e.Img+'" />\n                                        </a>\n                                        '+a+'\n                                    </div>\n                                    <div class="product_content">\n                                        <a class="product_name" href="'+e.Slug+'" title="'+e.Name+'" tabindex="0"> '+e.Name+'</a>\n                                        <div class="price-container">\n\n                                          '+n+"\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>"})),""!=htmlcategory?$(".load-list-product-lq").html(htmlcategory):$(".load-list-product-lq").html("<p class='productNotExit'>Không có sản phẩm nào</p>")}else $(".load-list-product-lq").html("<p class='productNotExit'>Không có sản phẩm nào</p>")}function loadCategoryPostIn(t){$.ajax({dataType:"JSON",type:"GET",url:urlGetCategoryPost,success:function(e){html="<ul>";var a=0;let n="";var i=null,o=0;itemchill="",e.forEach((function(e,l){""!=e.text?(n=e.id==t?"select":"",0==a?html+="<li class='"+n+"'><span><a class='collapse' href='/"+e.slug+"'>"+e.text:null==e.idPattern&&null==i?html+="</a><li><span><a class='collapse "+n+"' href='"+e.slug+"'>"+e.text:null==e.idPattern?(i>0&&(itemchill+="</li></ul>",html+=itemchill),html+="</li> <li><span><a class='collapse "+n+"' href='/"+e.slug+"'>"+e.text,0,o=0):null!=e.idPattern&&e.idPattern!=i&&e.Level>o?(itemchill="</a><i class='fas fa-angle-down'></i></span><ul class='dropdownlist'>",itemchill+="<li><span><a class='"+n+"' href='/"+e.slug+"'>"+e.text+"</span></a>",1):null!=e.idPattern&&e.idPattern==i?itemchill+='</li><li><span><a class="'+n+"\" href='/"+e.slug+"'>"+e.text+"</span></a>":null!=e.idPattern&&e.idPattern!=i&&e.Level,o=e.Level,i=e.idPattern,a+=1):""!=itemchill&&(html+=itemchill)})),html+="</li></ul>",_listcategoryindetailpost.html(html),loadevent.eventcollapsecategorypost()}})}function priceFormat(){$(".priceFormat").priceFormat({prefix:"",centsLimit:0,centsSeparator:",",thousandsSeparator:"."})}function showcategorymobi(){$(".modalcatemobile").each((function(){$(this).addClass("d-none")})),$("html, body").css("overflow","hidden")}function activeMenuApp(){$(".listitembar li").each((function(){$(this).removeClass("active")}))}jQuery("#txtsearchindex").bind("focusin focus",(function(t){t.preventDefault()})),$("input#txtsearchindex").focus((function(){$(this).autocomplete("search"),$("<div id='showzindex'></div>").insertAfter("header"),$("html").css("overflow","hidden")})),$("input#txtsearchindex").blur((function(){$("#showzindex").remove(),$("html").css("overflow","")})),selectProductType.change((function(){$("input#txtsearchindex").autocomplete("search")})),$((function(){$(".priceFormat").priceFormat({prefix:"",centsLimit:0,centsSeparator:",",thousandsSeparator:"."});var t=window.location;$(".listitembar a").filter((function(){return this.href==t})).parent("li").addClass("active")})),window.matchMedia("(max-width:  991.98px)").matches&&(LoadEventMenuMobi(),loadeventchillmenu(),$(".banner_headerRight").remove(),$("#element-search").remove(),$(".search_logo .logo").remove(),$(".mobile-search .select_seach").remove(),$(".barmaninapp").show(),$(window).bind("scroll",(function(){$(window).scrollTop()>30?($("#myheader").addClass("fixed-top"),$(".header-search").addClass("fixed-top")):($("#myheader").removeClass("fixed-top"),$(".header-search").removeClass("fixed-top"))}))),window.matchMedia("(min-width: 992px)").matches&&($(".title-seach").remove(),$(".btn-sreach").remove(),$(".icon-seach-mb").remove(),$(window).bind("scroll",(function(){$(window).scrollTop()>112?($("#myheader").addClass("fixed-top"),$(".header-search").addClass("fixed-top")):($("#myheader").removeClass("fixed-top"),$(".header-search").removeClass("fixed-top"))})));var totalitem=$(".intended__final-prices"),priceitem=$(".intended__real-prices"),AmountTamtinhOrder=$(".prices__value--tamtinh"),totalOrder=$(".final-total"),VATAmountOrder=$(".final-VATAmount"),amountOrder=$(".final-amount");function UploadAvatar(){var t;t=$("#upload-avata-user").croppie({viewport:{width:300,height:300,type:"circle"},enableExif:!0}),$("#upload").on("change",(function(){!function(e){if(e.files&&e.files[0]){var a=new FileReader;a.onload=function(e){$(".upload-avata-user").addClass("ready"),t.croppie("bind",{url:e.target.result}).then((function(){console.log("jQuery bind complete")}))},a.readAsDataURL(e.files[0])}else Swal.fire("Sorry - you're browser doesn't support the FileReader API")}(this),$(".swal2-container").addClass("change-avata")})),$(".upload-result").on("click",(function(e){var a="";t.croppie("result",{type:"canvas",size:"viewport"}).then((function(t){a=t,$.ajax({type:"POST",url:"/Account/UpdateAvatar",data:{base64:a},success:function(t){t.isValid?(popupResult.success(t.data),$(".form-avatar img.default").attr("src",t.src),$(".card-profile-image img.rounded-circle").attr("src",t.src),$(".main-head .login-cus img").attr("src",t.src).removeClass("icon-default"),$(".form-avatar img.default").addClass("active")):popupResult.error(t.data)},error:function(t){popupResult.error(t)}})}))})),$(".cancel-result").on("click",(function(t){Swal.close()}))}function toggleFullScreen(){var t=window.document,e=t.documentElement,a=e.requestFullscreen||e.mozRequestFullScreen||e.webkitRequestFullScreen||e.msRequestFullscreen,n=t.exitFullscreen||t.mozCancelFullScreen||t.webkitExitFullscreen||t.msExitFullscreen;t.fullscreenElement||t.mozFullScreenElement||t.webkitFullscreenElement||t.msFullscreenElement?n.call(t):a.call(e)}function fetContentHtmlprice(t){$.ajax({global:!1,type:"GET",data:{idselectd:t},contentType:"Json",url:"/API/Handling/GetAllPrice",success:function(t){if(t.isValid){let i=' <ul class="ul-item-price">',o=JSON.parse(t.data);var e=window.location.href,a=new URL(e),n=new URLSearchParams(a.search).get("idPrice");o.forEach((function(t,e,a){let o="";t.id==parseInt(n)&&(o="checked");i+='<li>\n                                   <input type="radio" '+o+'  class="icheckradio_square-green" name="price" id="price" data-price='+t.id+" value= "+t.id+" />\n                                   "+t.text+"\n                               </li>"})),i+="</ul>",$(".block-list-price .content-item").html(i),loadisCheck()}}})}function SortAndSeartInCategoryProduct(t=0){var e=window.location.href,a=new URL(e),n=new URLSearchParams(a.search);let i=$("input[name=order]:checked").attr("order"),o=$("input[name=price]:checked").val();void 0===o&&(o=n.get("idPrice"));const l=n.get("cate");n.delete("keyword"),n.delete("sortby"),n.delete("idPrice"),void 0!==o&&(n.append("idPrice",o),idPrice=o),void 0!==i&&(n.append("sortby",i),sortby=i),pushState(window.location.pathname+"?"+encodeURI(n.toString())),1==t?($(".row-order").trigger("click"),Product.fetch_dataSell(1,idcategory,l)):Product.fetch_data(1,idcategory,keyword)}function loadUser(){var t;return $.ajax({global:!1,async:!1,type:"GET",url:"/Account/GetUser",success:function(e){t=e.data}}),t}function loadeventmenumobi(){$("#menu_portal > li > a > i").click((function(t){return t.preventDefault(),$(this).closest("li").toggleClass("active"),!1}))}async function loadatahistori(t,e=0){var a;return $.ajax({global:!1,async:!1,url:"/Search/autoSearch",type:"GET",dataType:"json",data:{keyword:t,ProductType:parseInt($("#ProductType").val()),history:!0,Task:e},success:function(t){a=t}}),a}function loaddataSelect2arrPost(t,e,a,n,i="",o=""){let l=""!=o?o:"Chọn giá trị";$.ajax({global:!1,type:"POST",url:e,async:!0,data:{idselectd:i,code:a,idbrand:n},success:function(e){var a=JSON.parse(e);$(t).select2({data:a,placeholder:l,allowClear:!0,language:{noResults:function(){return"Không tìm thấy dữ liệu"}}})}})}function loaddataSelect2Ajax(t,e,a,n=""){$(e).select2({ajax:{url:t,type:"GET",dataType:"json",placeholder:n,data:function(t){return{idselectd:a}},templateSelection:function(t){return $(t.element).attr("source",t.source),t.text},processResults:function(t){return{results:$.map(t,(function(t){return{text:t.text,source:t.text,selected:t.selected,id:t.id}}))}},cache:!0}})}function loaddataSelect2(t,e,a,n="",i=!0){$.ajax({global:!1,async:i,type:"GET",dataType:"JSON",url:t,data:{idselectd:a},success:function(t){$(e).select2({data:t,placeholder:""!=n?n:"Chọn giá trị",allowClear:!0,language:{noResults:function(){return"Không tìm thấy dữ liệu"}}})}})}function templateSelect2(t){let e="<span class='select-option-noParent'>"+t.text+"</span>";return t.isParent&&(e="<span class='select-option-isParent'>"+t.text+"</span>"),e}function templateBoxSelect2(t){let e="<span class=''>"+t.text+"</span>";return"box"==t.Code&&(e="<span class='select2-option-box'><input type='text' class='form-control'/></span>"),e}function loaddataSelect2CustomsTempalteBox(t,e,a,n="",i,o){fromPrice=i,toPrice=o,$.ajax({global:!1,async:!0,type:"GET",dataType:"JSON",url:t,data:{idselectd:a},success:function(t){$(e).select2({data:t,placeholder:""!=n?n:"Chọn giá trị",allowClear:!0,language:{noResults:function(){return"Không tìm thấy dữ liệu"}},closeOnSelect:!0,dropdownAdapter:$.fn.select2.amd.require("SingleSelectSearchAdapter")}),toPrice>0&&loadSelectMucGia()}})}btnsearch.click((function(){""!=txtsearchindex.val()&&$(this).parents("form").submit()})),btnUpdateimgavata.click((function(){Swal.fire({title:"Cập nhật ảnh đại diện",html:'<div id="upload-avata" class="upload-avata-user" >\n                                <div class="body">\n                                    <div class="upload-msg">\n                                        <input type="file" id="upload" value="Choose a file" accept="image/*">\n                                            <span>Kích vào đây để chọn hình ảnh</span>\n                                    </div>\n                                        <div class="upload-avata-user-wrap">\n                                            <div id="upload-avata-user"></div>\n                                        </div>\n\n                                    </div>\n                                    <button class="cancel-result btn btn-default mr-2">Hủy bỏ</button>\n                                    <button class="upload-result btn btn-primary">Lưu thay đổi</button>\n\n                                </div>',showConfirmButton:!1,showCloseButton:!0,didRender:()=>{UploadAvatar()}})})),$("#formvalid").validate({ignore:"input[type=hidden]",rules:{Name:{required:!0,minlength:2},CodeConsultation:{required:!0},CarCompany:{required:!0},Email:{required:!0,email:!0}},messages:{FullName:{required:errrequired},CodeConsultation:{required:errrequired},PhoneNumber:{required:errrequired},Email:{required:errrequired,email:emailformat},CarCompany:{required:errrequired}},errorElement:"span",errorPlacement:function(t,e){if(Ladda.stopAll(),t.addClass("invalid-feedback"),"checkbox"===e.prop("type"))t.insertAfter(e.parent("label")),Ladda.stopAll();else{var a=e.parent();a=a.children().last(),t.insertAfter(a.last()),Ladda.stopAll()}var n=$(e);n.hasClass("select2-hidden-accessible")&&(e=$("#select2-"+n.attr("id")+"-container").parents(".form-group")).append(t)},highlight:function(t){$(t).addClass("is-invalid").removeClass("is-valid"),Ladda.stopAll();var e=$(t);e.hasClass("select2-hidden-accessible")&&$("#select2-"+e.attr("id")+"-container").parents(".form-group").find("span.select2-selection--single").addClass("is-invalid").removeClass("is-valid")},unhighlight:function(t){$(t).addClass("is-valid").removeClass("is-invalid");var e=$(t);e.hasClass("select2-hidden-accessible")&&$("#select2-"+e.attr("id")+"-container").parents(".form-group").find("span.select2-selection--single").removeClass("is-invalid").addClass("is-valid")},submitHandler:function(t){loadingStart(),t.submit()}}),$("#myForm").validate({ignore:"input[type=hidden], .select2-input, .select2-focusser"}),$("#PhoneNumber").usPhoneFormat({format:"(xxx) xxx-xxxx"}),window.matchMedia("(min-width: 992px)").matches,$("#txtsearchindex").autocomplete({autoFocus:!0,minLength:0,delay:500,source:function(t,e){if(""==t.term){var a=localStorage.getItem("search-keyword");if(null!=a&&a.length>0){var n=JSON.parse(a).filter((t=>t.ProductType==parseInt($("#ProductType").val())));n.length>0?e($.map(n,(function(e){return{label:"<a href='javascript:void(0)'><div class='search-auto'><div class='img'><i class='fas fa-history'></i></div><div class='tk_name'><span>"+__highlight(e.name,t.term)+"</span></div></div></a>",value:e.name}}))):loadatahistori(t.term).then((a=>{e($.map(a,(function(e){return{label:"<a href='javascript:void(0)'><div class='search-auto'><div class='img'><i class='fas fa-search'></i></div><div class='tk_name'><span>"+__highlight(e.name,t.term)+"</span></div></div></a>",value:e.name}})))}))}else loadatahistori(t.term).then((a=>{e($.map(a,(function(e){return{label:"<a href='javascript:void(0)'><div class='search-auto'><div class='img'><i class='fas fa-search'></i></div><div class='tk_name'><span>"+__highlight(e.name,t.term)+"</span></div></div></a>",value:e.name}})))}))}else $.ajax({global:!1,url:"/Search/autoSearch",type:"GET",dataType:"json",data:{keyword:t.term},success:function(a){return e($.map(a,(function(e){return{label:"<a href='javascript:void(0)'><div class='search-auto'><div class='img'><i class='fas fa-search'></i></div><div class='tk_name'><span>"+__highlight(e.name,t.term)+"</span></div></div></a>",value:e.name}}))),{label:t.term,value:t.term}}})},html:!0,select:function(t,e){$(this).val(e.item.value);var a,n=e.item.value.trim(),i=new Array,o=localStorage.getItem("search-keyword");null==o||""==o?((a=new Object).name=n,a.HistoryLoca=!0,a.ProductType=parseInt($("#ProductType").val()),i.push(a),localStorage.setItem("search-keyword",JSON.stringify(i))):((o=JSON.parse(o)).length>10&&o.pop(),0==o.filter((t=>t.name.toLowerCase().trim()==n.toLowerCase().trim())).length&&((a=new Object).name=n,a.HistoryLoca=!0,a.ProductType=parseInt($("#ProductType").val()),o.unshift(a),localStorage.setItem("search-keyword",JSON.stringify(o))));$(this).parents("form").submit()}});var fromPrice=0,toPrice=0;function loadnoUiSlider(){document.getElementById("slideprice-range").noUiSlider.updateOptions({step:100,range:{min:0,max:2e4}})}function loadsliderange(){var t=document.getElementById("slideprice-range");if(0==$("#slideprice-range").children(".noUi-base").length){let n=0,i=1e3,o=100,l=$(".mucgia option:selected").attr("data-leftValue"),s=$(".mucgia option:selected").attr("data-rightValue");l?n=parseInt(l):fromPrice>0&&(n=fromPrice/1e6),s?i=parseInt(s):toPrice>0&&(i=toPrice/1e6),l&&s&&(o=1),noUiSlider.create(t,{start:[n,i],range:{min:0,max:2e4},step:o,format:wNumb({decimals:0}),connect:!0});var e=$("#fromvalue"),a=$("#tovalue");t.noUiSlider.on("change.tap",(function(){t.noUiSlider.updateOptions({step:100,range:{min:0,max:2e4}})})),$(".price-slider-range input").keyup((function(){let n=e.val(),i=a.val();parseInt(n)>=0&&parseInt(i)>=0&&(t.noUiSlider.updateOptions({step:1,range:{min:0,max:2e4}}),t.noUiSlider.set([n,i]))})),t.noUiSlider.on("update",(function(t,n){!function(t,n){0!==n?a.val(t[1]):e.val(t[0])}(t,n)})),document.getElementById("btn-apply-range").addEventListener("click",loadSelectMucGia)}}function ConvertAmountToWord(t){let e="";if((t*=1e6)<0||t>999999999999999)return"Số quá lớn";if(t>=1e9&&t<=999999999999999){e=`${t/1e9} tỷ`}if(t>=1e6&&t<1e9){e=`${t/1e6} triệu`}return 0==t&&(e="0 đồng"),e}function loadSelectMucGia(){$(".mucgia option.option-value-custom").remove();var t=$("#fromvalue").val(),e=$("#tovalue").val();toPrice>0&&!e&&(e=toPrice/1e6,t=fromPrice/1e6);let a=ConvertAmountToWord(parseInt(t))+" - "+ConvertAmountToWord(parseInt(e));$(".mucgia").select2("destroy"),$(".mucgia").append('<option selected="selected" data-leftValue="'+t+'" data-rightValue="'+e+'" value="'+t+"-"+e+'" class="option-value-custom">'+a+"</option>"),$(".mucgia").select2({placeholder:"Tất cả",allowClear:!0,templateResult:resultState,language:{noResults:function(){return"Không tìm thấy dữ liệu"}},closeOnSelect:!0,dropdownAdapter:$.fn.select2.amd.require("SingleSelectSearchAdapter")})}function resultState(t,e){return t.element&&$(e).addClass($(t.element).attr("class")),t.text}function loaddataSelect2CustomsTempalte(t,e,a,n=""){$.ajax({global:!1,async:!0,type:"GET",dataType:"JSON",url:t,data:{idselectd:a},success:function(t){$(e).select2({data:t,placeholder:""!=n?n:"Chọn giá trị",allowClear:!0,templateResult:templateSelect2,escapeMarkup:function(t){return t},language:{noResults:function(){return"Không tìm thấy dữ liệu"}}})}})}function loaddataSelect2Append(t,e,a,n,o=""){$.ajax({global:!1,async:!0,type:"GET",url:t,dataType:"JSON",data:{idselectd:a},success:function(t){var l="<select name='"+n+"' id='"+n+"' class='form-control'>";for(l+="<option></option>",i=0;i<t.length;i++)t[i].id==a?l+='<option  selected="selected"  value="'+t[i].id+'" data-code='+t[i].slug+">"+t[i].text+"</option>":l+='<option value="'+t[i].id+'" data-code='+t[i].slug+">"+t[i].text+"</option>";l+="</select>",$(e).html(l),$(e).select2({placeholder:""!=o?o:"Tất cả",allowClear:!0,language:{noResults:function(){return"Không tìm thấy dữ liệu"}}})}})}function loaddaterangepicker(){try{$(".fc-datepicker").daterangepicker({singleDatePicker:!0,showDropdowns:!0,todayHighlight:!0,autoUpdateInput:!1,locale:{format:"DD/MM/YYYY",separator:" - ",applyLabel:"Apply",cancelLabel:"Cancel",fromLabel:"From",toLabel:"To",customRangeLabel:"Custom",weekLabel:"W",daysOfWeek:["CN","T2","T3","T4","T5","T6","T7"],monthNames:["Tháng 1","Tháng 2","Tháng 3","Tháng 4","Tháng 5","Tháng 6","Tháng 7","Tháng 8","Tháng 9","Tháng 10","Tháng 11","Tháng 12"],firstDay:1}});var t=$(".fc-datepicker"),e=0;$(window).on("click",(function(){e=0})),$(t).on("apply.daterangepicker",(function(t,a){e=0,$(this).val(a.startDate.format("DD/MM/YYYY"))})),$(".js-btn-calendar").on("click",(function(a){a.stopPropagation(),1===e?e=0:0===e&&(e=1),1===e&&t.focus()})),$(t).on("click",(function(t){t.stopPropagation(),e=1})),$(".daterangepicker").on("click",(function(t){t.stopPropagation()}))}catch(t){console.log(t)}}$.fn.select2.amd.define("SingleSelectSearchAdapter",["select2/utils","select2/dropdown","select2/dropdown/attachBody","select2/dropdown/attachContainer","select2/dropdown/search","select2/dropdown/minimumResultsForSearch","select2/dropdown/closeOnSelect"],(function(t,e,a,n,i,o,l){let s=t.Decorate(e,i);s.prototype.render=function(){let t=e.prototype.render.call(this),a=$('<span class="select2-custom-header"><span class="select2-custom-header__close"></span></span><span class="select2-search select2-search--dropdown price-slider-range slider-range"><input placeholder="Từ" value="'+fromPrice+'" class="form-control" id="fromvalue" type="text" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="none" spellcheck="false" role="textbox" /><span><img src="/icon/ic_arrow_left.png"></span><input placeholder="Đến" value="'+toPrice+'" class="form-control" id="tovalue" type="text" autocomplete="off" autocorrect="off" autocapitalize="none" spellcheck="false" role="textbox" /><button type="button" class="btn btn-success" id="btn-apply-range"><i class="fas fa-check"></i></button></span><div class="slideprice"><div id="slideprice-range"></div></div>');return this.$searchContainer=a,this.$search=a.find("input.search"),t.prepend(a),t};let r=t.Decorate(s,n);return r=t.Decorate(r,a,o,l),r}));var Product={Delete:function(t,e,a){var n=!1;try{$.ajax({type:"POST",url:t,async:!1,data:{id:e,idProduct:a},success:function(t){t.isValid&&(n=!0)},error:function(t){console.log(t)}})}catch(t){console.log(t)}return n},fetch_data:function(t,e,a){$.ajax({global:!1,type:"GET",data:{idcategory:e,idPrice:idPrice,sortby:sortby,keyword:a,pagenumber:t},url:"/Search/GetProduct",success:function(t){$("#dataProduct").html(t.html),loadisCheck(),loadnEvent_init.loadicheckpriceinCateogry(),setTimeout((function(){$("input#order").on("ifChecked",(function(t){sortby=$(this).attr("order"),SortAndSeartInCategoryProduct()})),$("input#price").on("ifChecked",(function(t){idPrice=$(this).val(),SortAndSeartInCategoryProduct()}))}),500),loadevent.load_tab_show_incategoryproduct(),initParams.clearParams(),loadnEvent_init.loadAddCart()}})},fetch_dataSell:function(t,e,a){$.ajax({global:!1,type:"GET",data:{cate:a,isPromotion:!0,loadmore:!0,idcate:e,idPrice:idPrice,sortby:sortby,page:t},url:"/Search/GetProductByCategory",success:function(t){$("#ListProduct").html(t),loadisCheck(),loadnEvent_init.loadicheckpriceinCateogry(),setTimeout((function(){$("input#order").on("ifChecked",(function(t){sortby=$(this).attr("order"),SortAndSeartInCategoryProduct(1)})),$("input#price").on("ifChecked",(function(t){idPrice=$(this).val(),SortAndSeartInCategoryProduct(1)}))}),200),loadevent.load_tab_show_incategoryproduct(),initParams.clearParams(),loadnEvent_init.loadAddCart()}})}},keyword="#keyword",search="#btnSearchtable";$(search).click((function(){loadLadda(),dataTableOut.draw(),Ladda.stopAll()}));var nameProAddCart="",imgProAddCart="",priceProAddCart="";function addCart(t,e,a){$.ajax({type:"POST",data:{IdProduct:t,Quantity:e,AddCart:a},dataType:"JSON",url:"/Cart/AddToCart",beforeSend:function(){},success:function(t){if(t.isValid)if(countCart.html(t.data.quantity),a){let a="<div class='body-add-pro-cart'><img src='"+imgProAddCart+"'/><div class='product-n'><span>"+nameProAddCart+"</span><span class='price'>"+priceProAddCart+" vnđ</span></div></div>";CustomePopupAddCart("Đã thêm "+e+" sản phẩm vào giỏ hàng.<b style='color:red'>("+t.data.quantity+")</b>",a)}else{let e=t.data.amount.format(0,3,".",",");$(".value-total").html(e+" vnđ"),$(".value-amount").html(e+" vnđ")}else 1==t.login?popupResult.warning(t.mess):toastr.error(t.mess)}})}function getCartUser(){$.ajax({global:!1,type:"GET",url:"/Cart/GetQuantityCartByUser",beforeSend:function(){},success:function(t){t.isValid?countCart.html(t.data):console.log(t.mess)}})}function animationacart(t,e,a,n,i,o,l){$("body").append("<div class='fly btn btn-primary'><i class='fas fa-check-circle'></i></div>"),$(".fly").css({overflow:"hidden",position:"fixed",height:e,width:a,top:n,left:i,display:"flex","align-items":"center","z-index":"1","padding-left":"14px"}),setTimeout((function(){$(".fly").animate({opacity:1},10).animate({borderRadius:"50%",width:40,height:40,marginLeft:a/2-e/2},300).animate({top:o-10,left:l-130},600).animate({opacity:0},600)}),20),setTimeout((function(){$(".fly").remove()}),1600),setTimeout((function(){quantity_cart.addClass("shake").html(t),setTimeout((function(){quantity_cart.removeClass("shake")}),500)}),1e3)}function ShowCart(t,e){var a="";0==t?(a=e,window.location.href="/Account/Login?ReturnUrl="+a):window.location.href="/Cart"}function loadListCategory(){let t=parseInt($("#idIdPatternCategory").val()),e=$("#NamePatternCategory").val();t>0&&$.ajax({global:!1,type:"GET",data:{IdPattern:t},url:"/Site/GetListCategoryByPattern",success:function(t){if(t.isValid){let a="";JSON.parse(t.data).forEach((function(t,n,i){a+='<a class="item item--category" style="padding-left: 0;" href="/'+e+"/"+t.Code+'.html">'+t.Name+"</a>"})),$(".listCategory").html(a)}}})}function loadListCountry(){$.ajax({global:!1,type:"GET",data:{},url:"/Site/GetListCountry",success:function(t){if(t.isValid){let e="";JSON.parse(t.data).forEach((function(t,a,n){e+='<label data-view-id="search_filter_item" data-view-index="0" class="item item--filter_mobile_rom">\n                                    <label class=" bHTjmp">\n                                        <input type="checkbox" id="idCountry" value="'+t.Id+'" />\n                                        <span>'+t.Name+"</span>\n                                    </label>\n                                </label>"})),$(".listContry").html(e)}}})}function loadmain(){loadEventButonlogin(),loaddaterangepicker(),loadevent.loadautocomplete(),loadnEvent_init.loadAddCart(),loadnEvent_init.loadeventcountnotifyuser(),loadnEvent_init.loadeventmobi()}function loadSelect2Home(){}function loadhistorisearch(){$.ajax({global:!1,type:"GET",url:"/Search/GetHistoris",beforeSend:function(){},success:function(t){var e="";if(t.isValid){t.data.forEach((function(t,a,n){e+="<a href='/Search?keyword="+encodeURI(t.name)+"&ProductType="+t.productType+"'>"+t.name+"</a>"})),$("#listhotkeysearch").html(e)}else console.log("fail Search/GetHistoris")}})}function loadisCheck(){$("input").iCheck({checkboxClass:"icheckbox_square-green",radioClass:"iradio_square-green",increaseArea:"20%"})}$("#increasePro button:first-child").click((function(){let t=parseInt($("#quantity").val()),e=t-1;if(!(t>1))return!1;$("#quantity").val(e),1==e&&$(this).addClass("disable")})),$("#increasePro button:last-child").click((function(){let t=parseInt($("#quantity").val()),e=t+1;if(!(t>0))return!1;$("#quantity").val(e),e>1&&$(this).parent().find(".disable").removeClass("disable")})),$(window).bind("scroll",(function(){$(window).scrollTop()>126?$(".header").addClass("fixed-top"):$(".header").removeClass("fixed-top")})),$("#headerSlidebarLT").hover((function(){$("<div id='showzindex'></div>").insertAfter("header")}),(function(){$("#showzindex").remove()})),$(document).ready((function(){getCartUser(),loadmain(),loadisCheck()}));