var enumTypeReportRevenue={NONE:-1,DOANHTHU:0,HUYDON:1,HINHTHUCPHUVU:3,HOADONCHUATHANHTOAN:4},enumTypeReportDashboard={DOANHTHU:0},enumTypeReportProduct={NONE:-1,DANHMUCMATHANG:0,MATHANGBANCHAY:1},report=(enumTypeReportProduct={NONE:-1,DANHMUCMATHANG:0,MATHANGBANCHAY:1},{getReportProduct:function(){$(".btn-report").click((function(){TypeReport=$("#TypeReport").val(),rangesDate=$("#rangesDate").val(),$.ajax({type:"GET",url:"/Selling/ReportPos/GetReportProducts",data:{typeReportProduct:TypeReport,rangesDate:rangesDate},success:function(t){if(t.isValid)if(t.typeReportPos==enumTypeReportProduct.DANHMUCMATHANG){htmltable="<div class=\"card\"><div class=\"card-body\">\n                                        <table class=\"table table-bordered table-striped\" id=\"datatable\" style=\"width:100%\">\n                                           <thead>\n                                               <tr>\n                                                   <th  class='text-center'>Danh mục</th>\n                                                   <th  class='text-center'>Giá bán</th>\n                                                   <th  class='text-center'>Đơn vị</th>\n                                                   <th  class='text-center'>Số lượng</th>\n                                                   <th  class='text-center'>Tổng tiền</th>\n                                               </tr>\n                                           </thead>\n                                           <tbody>\n                                          \n                                            ";let n=0,s=0;const l=t.data.listItemReports.reduce(((t,e)=>{const{categoryName:a}=e;return t[a]=t[a]??[],t[a].push(e),t}),{});$.each(l,(function(t,e){let a=0,l=0;htmlcontent="";for(var r=0;r<e.length;r++){var i=e[r];i&&(htmlcontent+="<tr>",a+=parseFloat(i.quantity),l+=parseFloat(i.total),console.log(parseFloat(i.quantity)),htmlcontent+="<td class='text-left'>"+i.productName+"</td>",htmlcontent+="<td class='text-right number3'>"+i.price+"</td>",htmlcontent+="<td class='text-center'>"+i.unit+"</td>",htmlcontent+="<td class='text-right'>"+i.quantity+"</td>",htmlcontent+="<td class='text-right number3'>"+i.total+"</td>",htmlcontent+="</tr>")}htmltbodyheader='<tr class="category">\n                                                <td class="d-none"></td>\n                                                <td class="d-none"></td>\n                                                <td colspan="3">'+t+"</td>\n                                                <td class='text-right number3'>"+a+"</td>\n                                                <td class='text-right number3'>"+l+"</td>\n                                            </tr>",htmltbodyheader+=htmlcontent,htmltable+=htmltbodyheader,n+=a,s+=l})),htmltable+="</tbody>\n                                        <tfoot>\n                                        <tr>\n                                            <th colspan=\"3\">Tổng cộng</th>\n                                            <th class='text-right number3'>"+n+"</th>\n                                            <th class='text-right number3'>"+s+"</th>\n                                        </tr>\n                                     </tfoot>",htmltable+="</table></div></div>",htmltableinvoice="<div class=\"card\"><div class=\"card-body\">\n                                        <table class=\"table table-bordered table-striped\" id=\"datatableDetail\" style=\"width:100%\">\n                                           <thead>\n                                               <tr>\n                                                   <th  class='text-center'>Tên hàng</th>\n                                                   <th  class='text-center'>ĐVT</th>\n                                                   <th  class='text-center'>Mã hóa đơn</th>\n                                                   <th  class='text-center'>Ngày bán</th>\n                                                   <th  class='text-center'>Khách hàng</th>\n                                                   <th  class='text-center'>Mã khách hàng</th>\n                                                   <th  class='text-center'>SL</th>\n                                                   <th  class='text-center'>Giá bán</th>\n                                                   <th  class='text-center'>Chiết khấu</th>\n                                                   <th  class='text-center'>Tổng thu</th>\n                                               </tr>\n                                           </thead>\n                                           <tbody>\n                                          \n                                            ",totals=0,discountAmounts=0,n=0;for(var e=0;e<t.data.listItemReportDetails.length;e++){var a=t.data.listItemReportDetails[e];discountAmounts+=a.discountAmount,totals+=a.total,n+=a.quantity,htmltableinvoice+="<td class='text-left'>"+a.productName+"</td>",htmltableinvoice+="<td class='text-center'>"+a.unit+"</td>",htmltableinvoice+="<td class='text-center'>"+a.invoiceNo+"</td>",htmltableinvoice+="<td class='text-center'>"+a.createDate+"</td>",htmltableinvoice+="<td class='text-center'>"+a.buyer+"</td>",htmltableinvoice+="<td class='text-center'>"+a.cusCode+"</td>",htmltableinvoice+="<td class='text-center number3'>"+a.quantity+"</td>",htmltableinvoice+="<td class='text-right number3'>"+a.price+"</td>",htmltableinvoice+="<td class='text-right number3'>"+a.discountAmount+"</td>",htmltableinvoice+="<td class='text-right number3'>"+a.total+"</td>",htmltableinvoice+="</tr>"}htmltableinvoice+="</tbody>\n                                        <tfoot>\n                                        <tr>\n                                            <th colspan=\"6\">Tổng cộng</th>\n                                            <th class='text-right number3'>"+n+"</th>\n                                            <th class='text-right'></th>\n                                            <th class='text-right number3'>"+discountAmounts+"</th>\n                                            <th class='text-right number3'>"+totals+"</th>\n                                        </tr>\n                                     </tfoot>",htmltableinvoice+="</table></div></div>",htmltabnavtable='<ul class="nav nav-pills mb-3 mt-3" id="pills-tab"  role="tablist">\n                                              <li class="nav-item ">\n                                                <a class="nav-link active" id="pills-home-tab" data-toggle="pill" href="#pills-home" role="tab" aria-controls="pills-home" aria-selected="true">Báo cáo theo hàng hóa</a>\n                                              </li>\n                                              <li class="nav-item reportdate">\n                                                <a class="nav-link" id="pills-profile-tab" data-toggle="pill" href="#pills-profile" role="tab" aria-controls="pills-profile" aria-selected="false">Báo cáo theo hàng hóa chi tiết</a>\n                                              </li>\n                                             \n                                            </ul>\n                                            <div class="tab-content" id="pills-tabContent">\n                                              <div class="tab-pane fade show active" id="pills-home" role="tabpanel" aria-labelledby="pills-home-tab">'+htmltable+'</div>\n                                              <div class="tab-pane fade" id="pills-profile" role="tabpanel" aria-labelledby="pills-profile-tab">'+htmltableinvoice+"</div>\n                                              \n                                            </div>",$("#contentDatareport").html(htmltabnavtable),priceFormat(),evetnFormatTextnumber3(),oTable=$("#datatable").DataTable({columnDefs:[{targets:1,type:"date-eu-pre"}],destroy:!0,fixedHeader:!0,scrollY:"500px",scrollX:!0,scrollCollapse:!0,paging:!1,searching:!0,ordering:!1,info:!1,order:[[1,"desc"]],language:{emptyTable:"Không tìm thấy dữ liệu"},dom:"Bfrtip",buttons:["excel","pdf","print"]}),$("#pills-tab li").click((function(){$(this).hasClass("reportdate")&&!$(this).hasClass("showdatatable")&&(setTimeout((function(){$("#datatableDetail").DataTable({fixedHeader:!0,scrollY:"500px",scrollX:!0,scrollCollapse:!0,paging:!0,searching:!0,ordering:!0,info:!1,columnDefs:[{targets:1,type:"date-eu-pre"}],order:[[1,"desc"]],dom:"Bfrtip",buttons:["excel","pdf","print"]})}),200),$(this).addClass("showdatatable"))}))}else if(t.typeReportPos==enumTypeReportProduct.MATHANGBANCHAY){htmltable="<div id='containerchart' class='card'></div>",htmltable+="<div class=\"card mt-3\"><div class=\"card-body\">\n                                        <table class=\"table table-bordered table-striped\" id=\"datatable\" style=\"width:100%\">\n                                           <thead>\n                                               <tr>\n                                                   <th  class='text-center'>Tên mặt hàng</th>\n                                                   <th  class='text-center'>Đơn vị</th>\n                                                   <th  class='text-center'>Danh mục</th>\n                                                   <th  class='text-center'>Giá bán</th>\n                                                   <th  class='text-center'>Số lượng</th>\n                                                   <th  class='text-center'>Tổng tiền</th>\n                                               </tr>\n                                           </thead>\n                                           <tbody>\n                                            ";for(e=0;e<t.data.listItemReports.length;e++){(a=t.data.listItemReports[e])&&(htmltable+="<tr>",htmltable+="<td class='text-left'>"+a.productName+"</td>",htmltable+="<td class='text-center'>"+a.unit+"</td>",htmltable+="<td class='text-left'>"+a.categoryName+"</td>",htmltable+="<td class='text-right priceFormat'>"+a.price+"</td>",htmltable+="<td class='text-center'>"+a.quantity+"</td>",htmltable+="<td class='text-right priceFormat'>"+a.total+"</td>",htmltable+="</tr>")}htmltable+="</tbody></table></div></div>",$("#contentDatareport").html(htmltable),report.showchartsanphambanchay(t.data.charts),priceFormat()}},error:function(t){toastr.error(t),console.log(t)}})}))},getreport:function(){$(".btn-report").click((function(){TypeReport=$("#TypeReport").val(),rangesDate=$("#rangesDate").val(),$.ajax({type:"GET",url:"/Selling/ReportPos/GetReportRevenue",data:{typeReportPos:TypeReport,rangesDate:rangesDate},success:function(t){if(t.isValid)if(t.typeReportPos==enumTypeReportRevenue.DOANHTHU){html=' <div class="row">\n                                    <div class="col-lg-12 col-xl-12">\n                                        <div class="main-card mb-3 card">\n                                            <div class="grid-menu grid-menu-2col">\n                                                <div class="no-gutters row">\n                                                    <div class="col-sm-3">\n                                                        <div class="widget-chart widget-chart-hover">\n                                                            <div class="icon-wrapper rounded-circle">\n                                                                <div class="icon-wrapper-bg bg-primary">\n                                                                </div>\n                                                                <i class="fas fa-file-alt text-primary"></i>\n                                                            </div>\n                                                            <div class="widget-numbers priceFormat">'+t.data.invoiceAll+'</div>\n                                                            <div class="widget-subheading">Tổng hóa đơn</div>\n                                                        </div>\n                                                    </div>\n                                                    <div class="col-sm-3">\n                                                        <div class="widget-chart widget-chart-hover">\n                                                            <div class="icon-wrapper rounded-circle">\n                                                                <div class="icon-wrapper-bg bg-info"></div>\n                                                                <i class="far fa-trash-alt text-danger"></i>\n                                                            </div>\n                                                              <div class="widget-numbers priceFormat">'+t.data.invoiceCancel+'</div>\n                                                            <div class="widget-subheading">Hóa đơn hủy</div>\n                                                        </div>\n                                                    </div>\n                                                    <div class="col-sm-3">\n                                                        <div class="widget-chart widget-chart-hover">\n                                                            <div class="icon-wrapper rounded-circle">\n                                                                <div class="icon-wrapper-bg bg-danger"></div>\n                                                                <i class="fas fa-utensils text-info"></i>\n                                                            </div>\n                                                             <div class="widget-numbers priceFormat">'+t.data.product+'</div>\n                                                            <div class="widget-subheading">Số lượng mặt hàng</div>\n\n                                                        </div>\n                                                    </div>\n                                                    <div class="col-sm-3">\n                                                        <div class="widget-chart widget-chart-hover br-br">\n                                                            <div class="icon-wrapper rounded-circle">\n                                                                <div class="icon-wrapper-bg bg-success"></div>\n                                                                <i class="fas fa-donate"></i>\n                                                            </div>\n                                                              <div class="widget-numbers priceFormat">'+t.data.amount+'</div>\n                                                            <div class="widget-subheading">Tổng doanh thu</div>\n\n                                                        </div>\n                                                    </div>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>',htmltable="<div class=\"card\"><div class=\"card-body\">\n                                        <table class=\"table table-bordered table-striped\" id=\"datatable\" style=\"width:100%\">\n                                           <thead>\n                                               <tr>\n                                                   <th  class='text-center'>Thứ</th>\n                                                   <th  class='text-center'>Ngày</th>\n                                                   <th  class='text-center'>Tiền hàng</th>\n                                                   <th  class='text-center'>Tiền giảm</th>\n                                                   <th  class='text-center'>Tiền hủy đơn</th>\n                                                   <th  class='text-center'>Phí phụ thu</th>\n                                                   <th  class='text-center'>Thuế GTGT</th>\n                                                   <th  class='text-center'>Tổng thu</th>\n                                               </tr>\n                                           </thead>\n                                           <tbody>\n                                          \n                                            ";let n=0,s=0,l=0,r=0,i=0,c=0;for(var e=0;e<t.data.listItemReports.length;e++){htmltable+="<tr>",n+=(a=t.data.listItemReports[e]).total,s+=a.discountAmount,l+=a.totalCancel,r+=a.serviceChargeAmount,i+=a.amount,c+=a.vatAmount,htmltable+="<td class='text-center'>"+a.rankName+"</td>",htmltable+="<td class='text-center'>"+a.createDate+"</td>",htmltable+="<td class='text-right priceFormat'>"+a.total+"</td>",htmltable+="<td class='text-right priceFormat'>"+-1*a.discountAmount+"</td>",htmltable+="<td class='text-right priceFormat'>"+-1*a.totalCancel+"</td>",htmltable+="<td class='text-right priceFormat'>"+a.serviceChargeAmount+"</td>",htmltable+="<td class='text-right priceFormat'>"+a.vatAmount+"</td>",htmltable+="<td class='text-right priceFormat'>"+a.amount+"</td>",htmltable+="</tr>"}htmltable+="</tbody>\n                                        <tfoot>\n                                        <tr>\n                                            <th colspan=\"2\">Tổng cộng</th>\n                                            <th class='text-right priceFormat'>"+n+"</th>\n                                            <th class='text-right priceFormat'>"+-1*s+"</th>\n                                            <th class='text-right priceFormat'>"+-1*l+"</th>\n                                            <th class='text-right priceFormat'>"+r+"</th>\n                                            <th class='text-right priceFormat'>"+c+"</th>\n                                            <th class='text-right priceFormat'>"+i+"</th>\n                                        </tr>\n                                     </tfoot>",htmltable+="</table></div></div>",htmltableinvoice="<div class=\"card\"><div class=\"card-body\">\n                                        <table class=\"table table-bordered table-striped\" id=\"datatableDetail\" style=\"width:100%\">\n                                           <thead>\n                                               <tr>\n                                                   <th  class='text-center'>Thứ</th>\n                                                   <th  class='text-center'>Ngày</th>\n                                                   <th  class='text-center'>Mã hóa đơn</th>\n                                                   <th  class='text-center'>Khách hàng</th>\n                                                   <th  class='text-center'>Bàn/phòng</th>\n                                                   <th  class='text-center'>Nhân viên bán</th>\n                                                   <th  class='text-center'>Trạng thái đơn</th>\n                                                   <th  class='text-center'>Tiền hàng</th>\n                                                   <th  class='text-center'>Tiền giảm</th>\n                                                   <th  class='text-center'>Phí phụ thu</th>\n                                                   <th  class='text-center'>Thuế GTGT</th>\n                                                   <th  class='text-center'>Tổng thu</th>\n                                               </tr>\n                                           </thead>\n                                           <tbody>\n                                          \n                                            ",n=0,s=0,r=0,i=0,c=0;for(e=0;e<t.data.listItemReportsByInvoice.length;e++){var a=t.data.listItemReportsByInvoice[e];3==parseInt(a.status)||4==parseInt(a.status)?htmltableinvoice+="<tr class='cancel'>":(htmltableinvoice+="<tr>",s+=a.discountAmount,r+=a.serviceChargeAmount,i+=a.amount,c+=a.vatAmount),n+=a.total,htmltableinvoice+="<td class='text-center'>"+a.rankName+"</td>",htmltableinvoice+="<td class='text-center'>"+a.createDate+"</td>",htmltableinvoice+="<td class='text-center'><a href='javascript:void(0)' data-id="+a.invoiceId+">"+a.invoiceCode+"</a></td>",htmltableinvoice+="<td class='text-center'>"+a.buyer+"</td>",htmltableinvoice+="<td class='text-center'>"+a.roomName+"</td>",htmltableinvoice+="<td class='text-center'>"+a.casherName+"</td>",3==parseInt(a.status)||4==parseInt(a.status)||6==parseInt(a.status)?htmltableinvoice+="<td class='text-center'><span class='badge badge-danger'>"+a.statusName+"</span></td>":5==parseInt(a.status)?htmltableinvoice+="<td class='text-center'><span class='badge badge-warning'>"+a.statusName+"</span></td>":htmltableinvoice+="<td class='text-center'><span class='badge badge-success'>"+a.statusName+"</span></td>",htmltableinvoice+="<td class='text-right priceFormat'>"+a.total+"</td>",htmltableinvoice+="<td class='text-right priceFormat'>"+a.discountAmount+"</td>",htmltableinvoice+="<td class='text-right priceFormat'>"+a.serviceChargeAmount+"</td>",htmltableinvoice+="<td class='text-right priceFormat'>"+a.vatAmount+"</td>",htmltableinvoice+="<td class='text-right priceFormat'>"+a.amount+"</td>",htmltableinvoice+="</tr>"}htmltableinvoice+="</tbody>\n                                        <tfoot>\n                                        <tr>\n                                            <th colspan=\"7\">Tổng cộng</th>\n                                            <th class='text-right priceFormat'>"+n+"</th>\n                                            <th class='text-right priceFormat'>"+s+"</th>\n                                            <th class='text-right priceFormat'>"+r+"</th>\n                                            <th class='text-right priceFormat'>"+c+"</th>\n                                            <th class='text-right priceFormat'>"+i+"</th>\n                                        </tr>\n                                     </tfoot>",htmltableinvoice+="</table></div></div>",htmltabnavtable='<ul class="nav nav-pills mb-3 mt-3" id="pills-tab"  role="tablist">\n                                              <li class="nav-item reportdate">\n                                                <a class="nav-link" id="pills-home-tab" data-toggle="pill" href="#pills-home" role="tab" aria-controls="pills-home" aria-selected="true">Báo cáo gộp theo ngày</a>\n                                              </li>\n                                              <li class="nav-item">\n                                                <a class="nav-link  active" id="pills-profile-tab" data-toggle="pill" href="#pills-profile" role="tab" aria-controls="pills-profile" aria-selected="false">Báo cáo theo hóa đơn</a>\n                                              </li>\n                                             \n                                            </ul>\n                                            <div class="tab-content" id="pills-tabContent">\n                                              <div class="tab-pane fade " id="pills-home" role="tabpanel" aria-labelledby="pills-home-tab">'+htmltable+'</div>\n                                              <div class="tab-pane fade show active" id="pills-profile" role="tabpanel" aria-labelledby="pills-profile-tab">'+htmltableinvoice+"</div>\n                                              \n                                            </div>",html+="<div id='containerchart' class='card'></div>",html+=htmltabnavtable,$("#contentDatareport").html(html),report.showchartdoanhthu(t.data.charts),priceFormat(),$("#datatableDetail").DataTable({fixedHeader:!0,scrollY:"500px",scrollX:!0,scrollCollapse:!0,paging:!1,searching:!0,ordering:!1,info:!1,columnDefs:[{targets:1,type:"date-eu-pre"}],order:[[1,"desc"]],dom:"Bfrtip",buttons:["excel","pdf","print"]}),$("#pills-tab li").click((function(){$(this).hasClass("reportdate")&&!$(this).hasClass("showdatatable")&&(setTimeout((function(){oTable=$("#datatable").DataTable({columnDefs:[{targets:1,type:"date-eu-pre"}],destroy:!0,fixedHeader:!0,scrollY:"500px",scrollX:!0,scrollCollapse:!0,paging:!1,searching:!0,ordering:!1,info:!1,order:[[1,"desc"]],dom:"Bfrtip",buttons:["excel","pdf","print"],language:{emptyTable:"Không tìm thấy dữ liệu"}})}),200),$(this).addClass("showdatatable"))}))}else if(t.typeReportPos==enumTypeReportRevenue.HUYDON){html="<div id='containerchart' class='card'></div>",htmltable="<div class=\"card\"><div class=\"card-body\">\n                                        <table class=\"table table-bordered table-striped\" id=\"datatable\" style=\"width:100%\">\n                                           <thead>\n                                               <tr>\n                                                   <th  class='text-center'>Thời gian</th>\n                                                   <th  class='text-center'>Mã hóa đơn</th>\n                                                   <th  class='text-center'>Người hủy</th>\n                                                   <th  class='text-center'>Lý do</th>\n                                                   <th  class='text-center'>Tổng tiền</th>\n                                               </tr>\n                                           </thead>\n                                           <tbody>\n                                          \n                                            ";let n=0;for(e=0;e<t.data.listItemReports.length;e++){htmltable+="<tr>",n+=(a=t.data.listItemReports[e]).amount,htmltable+="<td class='text-center'>"+a.creatDate+"</td>",htmltable+="<td class='text-center'><a href='javascript:void(0)' data-id="+a.invoiceId+">"+a.invoiceNo+"</a></td>",htmltable+="<td class='text-center'>"+a.casherName+"</td>",htmltable+="<td class='text-left'>"+a.note+"</td>",htmltable+="<td class='text-right priceFormat'>"+a.amount+"</td>",htmltable+="</tr>"}htmltable+="</tbody>\n                                        <tfoot>\n                                        <tr>\n                                            <th colspan=\"4\">Tổng cộng</th>\n                                            <th class='text-right priceFormat'>"+n+"</th>\n                                        </tr>\n                                     </tfoot>",htmltable+="</table></div></div>",html+=htmltable,$("#contentDatareport").html(html),t.isShowChart&&report.showcharthuydon(t.data.charts),priceFormat(),$("#datatable").DataTable({fixedHeader:!0,scrollY:"500px",scrollX:!0,scrollCollapse:!0,paging:!0,searching:!1,ordering:!0,dom:"Bfrtip",buttons:["excel","pdf","print"],info:!1})}else if(t.typeReportPos==enumTypeReportRevenue.HINHTHUCPHUVU){html="<div id='containerchart' class='card'></div>",htmltable='<div class="card"><div class="card-body">\n                                        <table class="table table-bordered table-striped" id="datatable" style="width:100%">\n                                           <thead>\n                                               <tr>\n                                                   <th  class=\'text-center\'>Hình thức</th>\n                                                   <th  class=\'text-center\'>Hóa đơn</th>\n                                                   <th  class=\'text-center\'>Hóa đơn hủy</th>\n                                                   <th  class=\'text-center\'>Tổng thu</th>\n                                               </tr>\n                                           </thead>\n                                           <tbody>\n                                          \n                                            ';let n=0;for(e=0;e<t.data.listItemReports.length;e++){htmltable+="<tr>",n+=(a=t.data.listItemReports[e]).amount,htmltable+="<td class='text-right'><b>"+a.name+"</b></td>",htmltable+="<td class='text-right priceFormat'>"+a.invoicePaymentCount+"</td>",htmltable+="<td class='text-right priceFormat'>"+a.invoiceCancelCount+"</td>",htmltable+="<td class='text-right priceFormat'>"+a.amount+"</td>",htmltable+="</tr>"}htmltable+="</tbody>\n                                        <tfoot>\n                                        <tr>\n                                            <th colspan=\"3\">Tổng cộng</th>\n                                            <th class='text-right priceFormat'>"+n+"</th>\n                                        </tr>\n                                     </tfoot>",htmltable+="</table></div></div>",html+=htmltable,$("#contentDatareport").html(html),report.showcharthinhthucphucvu(t.data.charts),priceFormat(),$("#datatable").DataTable({fixedHeader:!0,scrollY:"500px",scrollX:!0,scrollCollapse:!0,paging:!1,searching:!1,ordering:!0,info:!1,dom:"Bfrtip",buttons:["excel","pdf","print"]})}},error:function(t){toastr.error(t),console.log(t)}})}))},showcharthinhthucphucvu:function(t){var e=new Array,a=new Array;$.each(t,(function(t,n){e.push(n.key),a.push(n.value)})),Highcharts.chart("containerchart",{chart:{type:"bar"},title:{text:"Thống kê doanh thu"},subtitle:{text:""},xAxis:{categories:e},yAxis:{min:0,title:{text:""}},legend:{reversed:!0},plotOptions:{line:{dataLabels:{enabled:!0},enableMouseTracking:!1}},series:[{name:"Doanh thu",data:a}]})},showchartsanphambanchay:function(t){var e=new Array,a=new Array;$.each(t,(function(t,n){e.push(n.key),a.push(n.value)})),Highcharts.chart("containerchart",{chart:{type:"bar"},title:{text:"Báo cáo mặt hàng bán chạy",align:"center"},subtitle:{text:"SposViet.vn",align:"left"},xAxis:{categories:e,title:{text:null}},yAxis:{min:0,title:{text:"Doanh thu (vnđ)",align:"high"},labels:{overflow:"justify"}},tooltip:{valueSuffix:"đ"},plotOptions:{bar:{dataLabels:{enabled:!0}}},legend:{reversed:!0},credits:{enabled:!1},series:[{name:"Doanh thu",data:a}]})},showcharthuydon:function(t){var e=new Array,a=new Array;$.each(t,(function(t,n){e.push(n.key),a.push(n.value)})),Highcharts.chart("containerchart",{chart:{type:"column"},title:{text:"Thống kê doanh thu"},subtitle:{text:""},xAxis:{categories:e,crosshair:!0},yAxis:{min:0,title:{text:""}},tooltip:{headerFormat:'<span style="font-size:10px">{point.key}</span><table>',pointFormat:'<tr><td style="color:{series.color};padding:0">{series.name}: </td><td style="padding:0"><b>{point.y:.1f} mm</b></td></tr>',footerFormat:"</table>",shared:!0,useHTML:!0},legend:{reversed:!0},plotOptions:{line:{dataLabels:{enabled:!0},enableMouseTracking:!1}},series:[{name:"Doanh thu",data:a}]})},showchartdoanhthu:function(t){var e=new Array,a=new Array;$.each(t,(function(t,n){e.push(n.key),a.push(n.value)})),Highcharts.chart("containerchart",{chart:{type:"line"},title:{text:"Thống kê doanh thu"},subtitle:{text:""},xAxis:{categories:e},yAxis:{title:{text:""}},plotOptions:{line:{dataLabels:{enabled:!0},enableMouseTracking:!1}},series:[{name:"Doanh thu",data:a}]})}}),dashboardreport={eventChangrInput:function(){$("#rangesDate").change((function(){dashboardreport.reportdoanhthu()}))},GetDashBoardIndex:function(){$.ajax({type:"GET",global:!1,url:"/Selling/Dashboard/GetDashBoardIndex",success:function(t){if(t.isValid){let e=0;t.customer>0&&t.customerHomQua>0?(e=t.customer/t.customerHomQua*100,e<0&&(e=0)):t.customer>0&&0==t.customerHomQua&&(e=100);let a=0;t.dondaxong>0&&t.donxonghomqua>0&&(a=t.dondaxong/t.donxonghomqua*100,t.dondaxong<t.donxonghomqua&&(a=0));let n=0;t.doanhso>0&&t.doanhsohomqua>0&&(n=Math.round(t.doanhso/t.doanhsohomqua*100),t.doanhso<t.doanhsohomqua&&(n=0));let s='\n                            <div class="grid-card gridDashboard">\n                                <ul>\n                                    <li class="item-grid">\n                                        <div class="bg">\n                                            <span></span>\n                                            <span></span>\n                                            <span></span>\n                                        </div>\n                                        <div class="body">\n                                            <div class="header">\n                                             <i class="fas fa-users"></i>\n                                               <div class="content">\n                                                    <h3>Khách hàng</h3>\n                                                    <span>'+t.customer+'</span>\n                                                </div>\n                                            </div>\n                                            <div class="bottom">\n                                                <p class="">Hôm qua: '+t.customerHomQua+' <span class="float-right"><i class="fas fa-chart-line"></i>'+e+'%</span></p>\n                                            </div>\n                                        </div>\n                                    </li>\n                                    <li class="item-grid">\n                                        <div class="bg">\n                                            <span></span>\n                                            <span></span>\n                                            <span></span>\n                                        </div>\n                                        <div class="body">\n                                            <div class="header">\n                                                <i class="fas fa-user-edit"></i>\n                                                <div class="content">\n                                                    <h3>Đơn đang phục vụ</h3>\n                                                    <span>'+t.dondangphucvu+'</span>\n                                                </div>\n                                            </div>\n                                            <div class="bottom">\n                                                <p class="">Tổng dự thu: <span class="float-right amount">'+t.doanhthudondangphucvu.format0VND(3,3)+'</span></p>\n                                            </div>\n                                        </div>\n                                       \n                                    </li>\n                                    <li class="item-grid">\n                                        <div class="bg">\n                                            <span></span>\n                                            <span></span>\n                                            <span></span>\n                                        </div>\n                                        <div class="body">\n                                            <div class="header">\n                                               <i class="fas fa-shopping-cart"></i>\n                                                <div class="content">\n                                                    <h3>Đơn đã thanh toán</h3>\n                                                    <span>'+t.dondaxong.format0VND(0,3)+'</span>\n                                                </div>\n                                            </div>\n                                            <div class="bottom">\n                                                <p class="">Hôm qua: '+t.donxonghomqua.format0VND(0,3)+' <span class="float-right"><i class="fas fa-chart-line"></i>'+a+'%</span></p>\n                                            </div>\n                                        </div>\n                                    </li>\n\n                                    <li class="item-grid">\n                                        <div class="bg">\n                                            <span></span>\n                                            <span></span>\n                                            <span></span>\n                                        </div>\n                                        <div class="body">\n                                            <div class="header">\n                                                <i class="fas fa-donate"></i>\n                                                <div class="content">\n                                                    <h3>Tổng thu</h3>\n                                                    <span>'+t.doanhso.format0VND(0,3)+'</span>\n                                                </div>\n                                            </div>\n                                            <div class="bottom">\n                                                <p class="">Hôm qua: '+t.doanhsohomqua.format0VND(0,3)+' vnđ <span class="float-right"><i class="fas fa-chart-line"></i>'+n+"%</span></p>\n                                            </div>\n                                        </div>\n                                    </li>\n                                </ul>\n                            </div>\n                            ";$(".indexdashboad").html(s)}},error:function(t){toastr.error(t),console.log(t)}})},reportdoanhthu:function(){rangesDate=$("#rangesDate").val(),$.ajax({type:"GET",global:!1,url:"/Selling/ReportPos/GetReportDashBoard",data:{typeReportPos:enumTypeReportDashboard.DOANHTHU,rangesDate:rangesDate},success:function(t){t.isValid&&t.typeReportPos==enumTypeReportDashboard.DOANHTHU&&chartDashBoard.chartDoanhthu(t.data.charts)},error:function(t){toastr.error(t),console.log(t)}})}},chartDashBoard={chartDoanhthu:function(t){var e=new Array,a=new Array,n=new Array;$.each(t,(function(t,s){e.push(s.key),a.push(s.value),n.push(s.value2)})),Highcharts.setOptions({global:{useUTC:!1},lang:{decimalPoint:",",thousandsSep:"."}}),Highcharts.chart("reportAverage",{chart:{type:"column"},title:{text:"Báo cáo doanh thu theo ngày"},subtitle:{text:"Doanh thu"},xAxis:{categories:e,crosshair:!0},yAxis:{min:0,title:{text:"Doanh thu"}},tooltip:{headerFormat:'<span style="font-size:10px">{point.key}</span><table>',pointFormat:'<tr><td style="color:{series.color};padding:0">{series.name}: </td><td style="padding:0"><b>{point.y} vnđ</b></td></tr>',footerFormat:"</table>",shared:!0,useHTML:!0},plotOptions:{column:{pointPadding:.2,borderWidth:0}},series:[{name:"Tổng doanh thu",data:a},{name:"Tổng tiền thuế",data:n}]})}};